<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beranda - Geoportal Bumiayu Pruwatan</title>
    
    <!-- Three.js for 3D Globe -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/loaders/GLTFLoader.js"></script>
    
    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&family=Exo+2:wght@300;400;600&family=Rajdhani:wght@500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* ===== COSMIC THEME VARIABLES ===== */
        :root {
            --cosmic-deep: #0a0e17;
            --cosmic-dark: #111827;
            --cosmic-blue: #1e90ff;
            --cosmic-cyan: #4cc9f0;
            --cosmic-pink: #f72585;
            --cosmic-gold: #ffcc00;
            --cosmic-light: #f8f9fa;
            --cosmic-card: rgba(10, 14, 23, 0.9);
        }

        /* ===== BASE RESETS ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html, body {
            height: 100%;
            overflow-x: hidden;
            font-family: 'Exo 2', sans-serif;
            background: #000000;
            color: var(--cosmic-light);
            scroll-behavior: smooth;
        }

        /* ===== GLOBE HERO SECTION ===== */
        .globe-hero {
            position: relative;
            height: 100vh;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(
                to bottom,
                rgba(0, 0, 0, 0.8) 0%,
                rgba(10, 14, 23, 0.6) 100%
            );
        }

        #earthContainer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .hero-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(
                circle at center,
                transparent 0%,
                rgba(0, 0, 0, 0.7) 100%
            );
            z-index: 2;
            pointer-events: none;
        }

        .hero-content {
            position: relative;
            z-index: 3;
            text-align: center;
            max-width: 800px;
            padding: 2rem;
            animation: fadeInUp 1.5s ease-out;
        }

        .hero-content h2 {
            font-family: 'Orbitron', sans-serif;
            font-size: clamp(2.5rem, 5vw, 4rem);
            margin-bottom: 1.5rem;
            background: linear-gradient(135deg, var(--cosmic-light) 0%, var(--cosmic-cyan) 100%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 30px rgba(76, 201, 240, 0.3);
        }

        .hero-content p {
            font-size: 1.3rem;
            line-height: 1.8;
            margin-bottom: 2.5rem;
            color: rgba(255, 255, 255, 0.9);
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        /* ===== HEADER & NAVIGATION ===== */
        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: rgba(10, 14, 23, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(30, 144, 255, 0.2);
            z-index: 1000;
            padding: 1rem 0;
            transition: all 0.3s ease;
        }

        .header-scrolled {
            background: rgba(10, 14, 23, 0.98);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
        }

        .header-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo img {
            height: 45px;
            width: auto;
            filter: drop-shadow(0 0 10px rgba(30, 144, 255, 0.5));
        }

        .logo h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.4rem;
            background: linear-gradient(135deg, var(--cosmic-light) 0%, var(--cosmic-cyan) 100%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: 0.5px;
        }

        nav {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        nav a {
            color: var(--cosmic-light);
            text-decoration: none;
            font-weight: 600;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        nav a::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(30, 144, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }

        nav a:hover::before {
            left: 100%;
        }

        nav a:hover {
            background: rgba(30, 144, 255, 0.1);
            transform: translateY(-2px);
        }

        nav a.active {
            background: rgba(30, 144, 255, 0.15);
            border: 1px solid rgba(30, 144, 255, 0.4);
        }

        nav i {
            margin-right: 0.5rem;
            color: var(--cosmic-cyan);
        }

        /* ===== DROPDOWN NAVIGATION STYLES ===== */
        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropbtn {
            color: var(--cosmic-light);
            text-decoration: none;
            font-weight: 600;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            background: none;
            border: none;
            font-family: 'Exo 2', sans-serif;
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .dropbtn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(30, 144, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .dropbtn:hover::before {
            left: 100%;
        }

        .dropbtn:hover {
            background: rgba(30, 144, 255, 0.1);
            transform: translateY(-2px);
        }

        .dropdown-content {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            min-width: 220px;
            background: rgba(15, 20, 30, 0.98);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(30, 144, 255, 0.3);
            border-radius: 8px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.5);
            z-index: 1000;
            overflow: hidden;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s cubic-bezier(0.2, 0.8, 0.3, 1);
        }

        .dropdown-content a {
            color: var(--cosmic-light);
            padding: 0.8rem 1.2rem;
            text-decoration: none;
            display: block;
            border-bottom: 1px solid rgba(30, 144, 255, 0.1);
            transition: all 0.3s ease;
            font-weight: 400;
        }

        .dropdown-content a:last-child {
            border-bottom: none;
        }

        .dropdown-content a:hover {
            background: rgba(30, 144, 255, 0.15);
            color: var(--cosmic-cyan);
            padding-left: 1.5rem;
        }

        .dropdown-content a i {
            width: 20px;
            text-align: center;
            margin-right: 0.5rem;
        }

        /* Show dropdown on hover */
        .dropdown:hover .dropdown-content {
            display: block;
            opacity: 1;
            transform: translateY(0);
            animation: dropdownFade 0.3s ease-out;
        }

        @keyframes dropdownFade {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ===== ENHANCED INTERACTIVE MAP SECTION ===== */
        .maps-section {
            position: relative;
            z-index: 10;
            padding: 6rem 2rem;
            background: linear-gradient(
                to bottom,
                rgba(10, 14, 23, 0.95) 0%,
                rgba(10, 14, 23, 1) 100%
            );
            min-height: auto;
            overflow: visible;
        }

        .section-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 3rem;
            margin-bottom: 2rem;
            color: var(--cosmic-cyan);
            position: relative;
            display: inline-block;
            text-align: center;
            width: 100%;
            animation: titleFloat 3s ease-in-out infinite;
        }

        @keyframes titleFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 300px;
            height: 4px;
            background: linear-gradient(90deg, transparent, var(--cosmic-cyan), transparent);
            border-radius: 2px;
        }

        .title-subtext {
            text-align: center;
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 4rem;
            font-weight: 300;
            letter-spacing: 1px;
            animation: fadeIn 2s ease-out;
        }

        /* ===== ENHANCED MAP CARDS LAYOUT ===== */
        .map-cards-container {
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
            display: flex;
            flex-direction: column;
            gap: 6rem;
        }

        .map-card {
            display: flex;
            align-items: center;
            gap: 4rem;
            opacity: 0;
            transform: translateY(80px);
            transition: all 1s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            padding: 2.5rem;
            border-radius: 20px;
            background: linear-gradient(
                145deg,
                rgba(20, 25, 35, 0.8) 0%,
                rgba(10, 14, 23, 0.6) 100%
            );
            overflow: hidden;
            min-height: 450px;
            width: 100%;
            border: 1px solid rgba(30, 144, 255, 0.1);
            will-change: transform, opacity;
        }

        .map-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, 
                transparent 0%, 
                rgba(30, 144, 255, 0.05) 50%, 
                transparent 100%);
            z-index: -1;
            opacity: 0;
            transition: opacity 0.6s ease;
        }

        .map-card:hover::before {
            opacity: 1;
        }

        /* ENTRANCE ANIMATION */
        .map-card.active {
            opacity: 1;
            transform: translateY(0);
        }

        /* EXIT ANIMATION */
        .map-card.exit {
            opacity: 0;
            transform: translateY(80px);
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .map-card:nth-child(odd) {
            flex-direction: row;
        }

        .map-card:nth-child(even) {
            flex-direction: row-reverse;
        }

        .card-content {
            flex: 1;
            padding: 2rem;
            position: relative;
            z-index: 2;
            min-width: 0;
        }

        .card-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            color: var(--cosmic-cyan);
            position: relative;
            display: inline-block;
            text-shadow: 0 0 20px rgba(76, 201, 240, 0.3);
        }

        .card-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, var(--cosmic-blue), var(--cosmic-cyan));
            border-radius: 2px;
        }

        .location-badge {
            display: inline-block;
            background: rgba(30, 144, 255, 0.1);
            color: var(--cosmic-cyan);
            padding: 0.5rem 1.5rem;
            border-radius: 20px;
            font-size: 0.9rem;
            margin-bottom: 1.5rem;
            border: 1px solid rgba(30, 144, 255, 0.3);
            animation: badgePulse 2s ease-in-out infinite;
        }

        @keyframes badgePulse {
            0%, 100% { box-shadow: 0 0 0 rgba(30, 144, 255, 0); }
            50% { box-shadow: 0 0 20px rgba(30, 144, 255, 0.3); }
        }

        .card-description {
            font-size: 1.1rem;
            line-height: 1.7;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 2rem;
            font-weight: 300;
        }

        .card-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-bottom: 2.5rem;
        }

        .stat-item {
            background: rgba(20, 25, 35, 0.5);
            padding: 1.2rem;
            border-radius: 10px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .stat-item:hover {
            transform: translateY(-5px);
            background: rgba(30, 144, 255, 0.1);
        }

        .stat-value {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8rem;
            color: var(--cosmic-cyan);
            margin-bottom: 0.3rem;
        }

        .stat-label {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.7);
        }

        .card-image {
            flex: 1;
            position: relative;
            overflow: hidden;
            border-radius: 15px;
            height: 400px;
            min-width: 400px;
            box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.8),
                0 0 0 1px rgba(30, 144, 255, 0.4);
            transition: all 0.5s ease;
        }

        .card-image:hover {
            transform: scale(1.02);
            box-shadow: 
                0 30px 80px rgba(0, 0, 0, 0.9),
                0 0 0 2px rgba(30, 144, 255, 0.6);
        }

        .card-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 1s ease;
        }

        .card-image:hover img {
            transform: scale(1.05);
        }

        .image-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 1.5rem;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.4s ease;
        }

        .card-image:hover .image-overlay {
            opacity: 1;
            transform: translateY(0);
        }

        .map-button {
            display: inline-flex;
            align-items: center;
            gap: 1rem;
            background: linear-gradient(135deg, 
                rgba(30, 144, 255, 0.2) 0%,
                rgba(76, 201, 240, 0.1) 100%);
            color: var(--cosmic-cyan);
            padding: 1rem 2rem;
            border-radius: 10px;
            text-decoration: none;
            font-family: 'Rajdhani', sans-serif;
            font-weight: 600;
            font-size: 1rem;
            border: 2px solid rgba(30, 144, 255, 0.4);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .map-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.2), 
                transparent);
            transition: left 0.6s ease;
        }

        .map-button:hover::before {
            left: 100%;
        }

        .map-button:hover {
            transform: translateY(-3px);
            background: linear-gradient(135deg, 
                rgba(30, 144, 255, 0.3) 0%,
                rgba(76, 201, 240, 0.2) 100%);
            border-color: var(--cosmic-blue);
            box-shadow: 
                0 10px 20px rgba(30, 144, 255, 0.2),
                0 0 30px rgba(30, 144, 255, 0.1);
        }

        /* ===== FEATURE CARDS ===== */
        .feature-section {
            padding: 6rem 2rem;
            background: rgba(10, 14, 23, 0.98);
            position: relative;
            overflow: hidden;
        }

        .feature-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(
                circle at 30% 50%,
                rgba(30, 144, 255, 0.05) 0%,
                transparent 50%
            );
            pointer-events: none;
        }

        .feature-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 2.5rem;
            max-width: 1400px;
            margin: 4rem auto 0;
        }

        .feature-card {
            background: linear-gradient(
                145deg,
                rgba(20, 25, 35, 0.8) 0%,
                rgba(10, 14, 23, 0.6) 100%
            );
            backdrop-filter: blur(20px);
            border-radius: 15px;
            padding: 2.5rem 2rem;
            border: 1px solid rgba(30, 144, 255, 0.3);
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
            opacity: 0;
            transform: translateY(30px);
        }

        .feature-card.active {
            opacity: 1;
            transform: translateY(0);
        }

        .feature-card.exit {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.6s ease;
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--cosmic-blue), var(--cosmic-cyan));
        }

        .feature-card:hover {
            transform: translateY(-10px);
            border-color: var(--cosmic-blue);
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.4),
                0 0 50px rgba(30, 144, 255, 0.1);
        }

        .feature-card i {
            font-size: 2.5rem;
            color: var(--cosmic-cyan);
            margin-bottom: 1.5rem;
            display: block;
        }

        .feature-card h4 {
            font-family: 'Rajdhani', sans-serif;
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: var(--cosmic-light);
            position: relative;
            display: inline-block;
        }

        .feature-card h4::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 50px;
            height: 2px;
            background: var(--cosmic-cyan);
        }

        .feature-card p {
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.6;
            font-size: 1rem;
            font-weight: 300;
        }

        /* ===== FOOTER ===== */
        footer {
            background: rgba(5, 9, 16, 0.98);
            border-top: 1px solid rgba(30, 144, 255, 0.2);
            padding: 3rem 2rem;
            position: relative;
            z-index: 10;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            text-align: center;
        }

        footer p {
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 0.8rem;
            line-height: 1.5;
            font-size: 0.9rem;
        }

        footer a {
            color: var(--cosmic-cyan);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        footer a:hover {
            color: var(--cosmic-blue);
            text-decoration: underline;
        }

        /* ===== RESPONSIVE DESIGN ===== */
        @media (max-width: 1200px) {
            .map-card {
                gap: 3rem;
            }
            
            .card-image {
                height: 350px;
                min-width: 350px;
            }
            
            .card-stats {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 992px) {
            .header-container {
                flex-direction: column;
                gap: 1rem;
                padding: 1rem;
            }
            
            nav {
                flex-wrap: wrap;
                justify-content: center;
                gap: 1rem;
            }
            
            .map-card {
                flex-direction: column !important;
                gap: 2.5rem;
                min-height: auto;
                padding: 2rem;
            }
            
            .card-content {
                padding: 1rem;
            }
            
            .card-image {
                height: 300px;
                min-width: auto;
                width: 100%;
            }
            
            .section-title {
                font-size: 2.2rem;
                margin-bottom: 1.5rem;
            }
            
            .card-title {
                font-size: 1.8rem;
            }
            
            .feature-cards {
                grid-template-columns: repeat(2, 1fr);
                gap: 2rem;
            }
        }

        @media (max-width: 768px) {
            .header-container {
                padding: 0.8rem;
            }
            
            nav {
                gap: 0.5rem;
            }
            
            nav a, .dropbtn {
                padding: 0.4rem 0.8rem;
                font-size: 0.9rem;
            }
            
            .dropdown-content {
                position: fixed;
                top: auto;
                left: 50%;
                transform: translateX(-50%) translateY(-10px);
                min-width: 90vw;
                max-width: 300px;
            }
            
            .dropdown:hover .dropdown-content {
                transform: translateX(-50%) translateY(0);
            }
            
            .hero-content h2 {
                font-size: 1.8rem;
            }
            
            .hero-content p {
                font-size: 1rem;
            }
            
            .maps-section {
                padding: 4rem 1rem;
            }
            
            .feature-section {
                padding: 4rem 1rem;
            }
            
            .feature-cards {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            .feature-card {
                padding: 2rem 1.5rem;
            }
            
            .card-image {
                height: 250px;
            }
            
            .section-title {
                font-size: 1.8rem;
            }
            
            .card-title {
                font-size: 1.6rem;
            }
            
            .map-cards-container {
                gap: 4rem;
            }
        }

        @media (max-width: 480px) {
            .logo h1 {
                font-size: 1.1rem;
            }
            
            .hero-content h2 {
                font-size: 1.5rem;
            }
            
            .hero-content p {
                font-size: 0.9rem;
            }
            
            .section-title {
                font-size: 1.5rem;
            }
            
            .card-title {
                font-size: 1.4rem;
            }
            
            .card-image {
                height: 200px;
            }
            
            .map-button {
                padding: 0.8rem 1.5rem;
                font-size: 0.9rem;
            }
            
            .stat-item {
                padding: 0.8rem;
            }
            
            .stat-value {
                font-size: 1.4rem;
            }
        }

        /* ===== ANIMATIONS ===== */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-fade-in {
            animation: fadeIn 1s ease-out forwards;
        }

        /* ===== SCROLLBAR STYLING ===== */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--cosmic-deep);
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(var(--cosmic-blue), var(--cosmic-cyan));
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(var(--cosmic-cyan), var(--cosmic-blue));
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header id="mainHeader">
        <div class="header-container">
            <div class="logo">
                <img src="images/logo.png" alt="Logo Geoportal">
                <h1>Geoportal Bumiayu Pruwatan</h1>
            </div>
            <nav>
                <a href="../Beranda/" class="active"><i class="fas fa-home"></i> Beranda</a>
                <a href="../Bumiayu/"><i class="fas fa-map"></i> Peta Kecamatan</a>
                
                <!-- DROPDOWN UNTUK DESA -->
                <div class="dropdown">
                    <a href="javascript:void(0)" class="dropbtn">
                        <i class="fas fa-tree"></i> Desa di Bumiayu <i class="fas fa-caret-down"></i>
                    </a>
                    <div class="dropdown-content">
                        <!-- Hanya ada satu item untuk sekarang -->
                        <a href="../Pruwatan/"><i class="fas fa-map-pin"></i> Desa Pruwatan</a>
                        <a href="../Kalisumur/"><i class="fas fa-map-pin"></i> Desa Kalisumur</a>
                        <!-- 
                            TEMPLATE UNTUK MENAMBAH DESA BARU:
                            <a href="../[Nama-Desa]/"><i class="fas fa-map-pin"></i> Desa [Nama Desa]</a>
                        -->
                    </div>
                </div>
                
                <a href="../Tentang/"><i class="fas fa-info-circle"></i> Tentang</a>
            </nav>
        </div>
    </header>

    <!-- Globe Hero Section -->
    <section class="globe-hero">
        <div id="earthContainer"></div>
        <div class="hero-overlay"></div>
        <div class="hero-content">
            <h2>Satu Peta untuk Data Spasial Terpadu</h2>
            <p>Portal ini menyajikan peta interaktif dan data geospasial wilayah Kecamatan Bumiayu untuk perencanaan dan pengembangan wilayah Kecamatan Bumiayu</p>
            <a href="#maps" class="map-button">
                <i class="fas fa-chevron-down"></i>
                Jelajahi Peta
            </a>
        </div>
    </section>

    <!-- Enhanced Interactive Maps Section -->
    <section class="maps-section" id="maps">
        <h2 class="section-title">Peta Interaktif 3D</h2>
        <p class="title-subtext">Jelajahi data geospasial wilayah Bumiayu dengan pengalaman visual yang imersif</p>
        
        <div class="map-cards-container">
            <!-- Kecamatan Bumiayu Card -->
            <div class="map-card" id="bumiayu-card">
                <div class="card-content">
                    <span class="location-badge">
                        <i class="fas fa-map-marker-alt"></i> KECAMATAN
                    </span>
                    <h3 class="card-title">Bumiayu</h3>
                    <p class="card-description">
                        Kecamatan Bumiayu merupakan pusat pemerintahan dan aktivitas ekonomi di wilayah selatan Kabupaten Brebes. 
                        Dengan luas wilayah 12.456 hektar, kecamatan ini memiliki 15 desa yang kaya akan potensi pertanian, 
                        perkebunan, dan pariwisata alam yang tersebar di dataran tinggi dan lereng gunung.
                    </p>
                    
                    <div class="card-stats">
                        <div class="stat-item">
                            <div class="stat-value">15</div>
                            <div class="stat-label">Desa</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">12,456</div>
                            <div class="stat-label">Hektar Luas</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">85%</div>
                            <div class="stat-label">Lahan Pertanian</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">7</div>
                            <div class="stat-label">Fasilitas Wisata</div>
                        </div>
                    </div>
                    
                    <a href="../Bumiayu/" class="map-button">
                        <i class="fas fa-map"></i>
                        Jelajahi Peta Kecamatan
                    </a>
                </div>
                <div class="card-image">
                    <img src="images/map-bumiayu.png" alt="Peta Kecamatan Bumiayu">
                    <div class="image-overlay">
                        <p style="color: white; font-size: 0.9rem;">Klik gambar untuk detail peta Bumiayu</p>
                    </div>
                </div>
            </div>

            <!-- Desa Pruwatan Card -->
            <div class="map-card" id="pruwatan-card">
                <div class="card-content">
                    <span class="location-badge">
                        <i class="fas fa-map-pin"></i> DESA
                    </span>
                    <h3 class="card-title">Pruwatan</h3>
                    <p class="card-description">
                        Desa Pruwatan adalah desa yang berkembang pesat di Kecamatan Bumiayu dengan karakteristik geografis 
                        unik berupa perbukitan dan lahan pertanian yang subur. Desa ini dikenal dengan hasil pertanian 
                        berkualitas tinggi dan memiliki potensi wisata alam yang menarik dengan panorama perbukitan yang memukau.
                    </p>
                    
                    <div class="card-stats">
                        <div class="stat-item">
                            <div class="stat-value">4</div>
                            <div class="stat-label">Dusun</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">2,345</div>
                            <div class="stat-label">Hektar Luas</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">92%</div>
                            <div class="stat-label">Lahan Produktif</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">3</div>
                            <div class="stat-label">Spot Wisata</div>
                        </div>
                    </div>
                    
                    <a href="../Pruwatan/" class="map-button">
                        <i class="fas fa-map-marked-alt"></i>
                        Lihat Detail Peta Desa
                    </a>
                </div>
                <div class="card-image">
                    <img src="images/map-thumbnail.png" alt="Peta Desa Pruwatan">
                    <div class="image-overlay">
                        <p style="color: white; font-size: 0.9rem;">Klik gambar untuk detail peta Pruwatan</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="feature-section">
        <h2 class="section-title">Fitur Unggulan</h2>
        <p class="title-subtext">Teknologi canggih untuk pengalaman geospasial terbaik</p>
        
        <div class="feature-cards">
            <div class="feature-card" id="feature1">
                <i class="fas fa-layer-group"></i>
                <h4>Layers Berlapis 3D</h4>
                <p>Tampilkan lapisan peta seperti batas administrasi, jalan, dan penggunaan lahan dalam pengalaman 3D interaktif dengan kontrol penuh atas setiap layer.</p>
            </div>
            <div class="feature-card" id="feature2">
                <i class="fas fa-download"></i>
                <h4>Unduh Data Spasial</h4>
                <p>Akses dan unduh data geospasial dalam berbagai format (Shapefile, GeoJSON, KML) dengan metadata lengkap dan dokumentasi terstruktur.</p>
            </div>
            <div class="feature-card" id="feature3">
                <i class="fas fa-search-location"></i>
                <h4>Pencarian Lokasi Cerdas</h4>
                <p>Cari lokasi berdasarkan nama desa, kecamatan, atau koordinat dengan sistem pencarian real-time yang dilengkapi dengan auto-complete.</p>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <p>© 2025 Geoportal Bumiayu Pruwatan. Dibangun dengan QGIS, Three.js, Leaflet, dan GitHub Pages.</p>
            <p>Kontak: <a href="mailto:haidarhisyam1823@gmail.com">haidarhisyam1823@gmail.com</a></p>
            <p>Theme: Cosmic Exploration • v2.0</p>
        </div>
    </footer>

    <script>
        // ======================
        // 3D EARTH FOR BERANDA
        // ======================
        
        let scene, camera, renderer, earth;
        let controls;
        
        function initEarth3D() {
            // 1. Create scene
            scene = new THREE.Scene();
            
            // 2. Create camera
            camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 3;
            
            // 3. Create renderer
            renderer = new THREE.WebGLRenderer({ 
                alpha: true, 
                antialias: true,
                powerPreference: "high-performance"
            });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            
            const earthContainer = document.getElementById('earthContainer');
            earthContainer.appendChild(renderer.domElement);
            
            // 4. Add enhanced lighting
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.8);
            scene.add(ambientLight);
            
            const directionalLight1 = new THREE.DirectionalLight(0xffffff, 1);
            directionalLight1.position.set(5, 3, 5);
            scene.add(directionalLight1);
            
            const directionalLight2 = new THREE.DirectionalLight(0x4cc9f0, 0.5);
            directionalLight2.position.set(-5, -3, 5);
            scene.add(directionalLight2);
            
            // 5. Add subtle background stars
            createStarfield();
            
            // 6. Load Earth model
            const loader = new THREE.GLTFLoader();
            
            loader.load(
                '../assets/3d-models/earth.glb',
                function(gltf) {
                    earth = gltf.scene;
                    
                    // Apply user's adjustments
                    earth.scale.set(0.4, 0.4, 0.4);
                    
                    // Apply Indonesia rotation
                    const targetRotationY = Math.PI + (155 * Math.PI / 190);
                    earth.rotation.y = targetRotationY;
                    
                    // Center the earth
                    earth.position.set(0, 0, 0);
                    
                    // Enable shadows
                    earth.traverse(function(node) {
                        if (node.isMesh) {
                            node.castShadow = true;
                            node.receiveShadow = true;
                            node.material.emissive = new THREE.Color(0x0a0e17);
                            node.material.emissiveIntensity = 0.1;
                        }
                    });
                    
                    scene.add(earth);
                    
                    // Add orbit controls for interaction
                    controls = new THREE.OrbitControls(camera, renderer.domElement);
                    controls.enableDamping = true;
                    controls.dampingFactor = 0.05;
                    controls.enableZoom = false;
                    controls.enablePan = false;
                    controls.enableRotate = true;
                    controls.rotateSpeed = 0.5;
                    controls.maxPolarAngle = Math.PI;
                    controls.minPolarAngle = 0;
                    
                    // Start animation
                    animate();
                    
                    // Add subtle auto-rotation
                    setTimeout(() => {
                        if (earth) {
                            earth.rotation.y += 0.0005;
                        }
                    }, 1000);
                },
                function(xhr) {
                    console.log((xhr.loaded / xhr.total * 100) + '% loaded');
                },
                function(error) {
                    console.error('Error loading Earth model:', error);
                    createFallbackEarth();
                }
            );
            
            // 7. Handle window resize
            window.addEventListener('resize', onWindowResize);
        }
        
        function createFallbackEarth() {
            const geometry = new THREE.SphereGeometry(1, 32, 32);
            const material = new THREE.MeshPhongMaterial({
                color: 0x1e90ff,
                shininess: 30,
                specular: 0x111111
            });
            
            earth = new THREE.Mesh(geometry, material);
            earth.scale.set(0.4, 0.4, 0.4);
            const targetRotationY = Math.PI + (155 * Math.PI / 190);
            earth.rotation.y = targetRotationY;
            scene.add(earth);
            
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            controls.enableZoom = false;
            controls.enablePan = false;
            
            animate();
        }
        
        function createStarfield() {
            const starGeometry = new THREE.BufferGeometry();
            const starCount = 800;
            const positions = new Float32Array(starCount * 3);
            
            for (let i = 0; i < starCount * 3; i += 3) {
                positions[i] = (Math.random() - 0.5) * 2000;
                positions[i + 1] = (Math.random() - 0.5) * 2000;
                positions[i + 2] = (Math.random() - 0.5) * 2000;
            }
            
            starGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
            
            const starMaterial = new THREE.PointsMaterial({
                color: 0xffffff,
                size: 0.5,
                transparent: true,
                opacity: 0.7
            });
            
            const stars = new THREE.Points(starGeometry, starMaterial);
            scene.add(stars);
        }
        
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }
        
        function animate() {
            requestAnimationFrame(animate);
            
            // Very slow auto-rotation
            if (earth) {
                earth.rotation.y += 0.0001;
            }
            
            if (controls) controls.update();
            renderer.render(scene, camera);
        }
        
        // ======================
        // ENHANCED SCROLL ANIMATIONS WITH ENTRANCE AND EXIT
        // ======================
        
        // Track which elements have been animated before
        const animatedElements = new Set();
        
        // Initialize enhanced scroll animations
        function initScrollAnimations() {
            // Configuration for animations
            const animationConfig = {
                threshold: 0.2,
                rootMargin: '0px 0px -50px 0px',
                entranceDelay: 300,
                exitDelay: 100
            };
            
            // Card animation observer with entrance AND exit
            const cardObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    const card = entry.target;
                    const cardId = card.id;
                    
                    if (entry.isIntersecting) {
                        // ENTRANCE ANIMATION
                        // Remove exit class if present
                        card.classList.remove('exit');
                        
                        // Calculate delay based on position
                        const index = Array.from(document.querySelectorAll('.map-card')).indexOf(card);
                        const delay = index * animationConfig.entranceDelay;
                        
                        setTimeout(() => {
                            card.classList.add('active');
                            animatedElements.add(cardId);
                        }, delay);
                    } else {
                        // EXIT ANIMATION - only if element has been animated before
                        if (animatedElements.has(cardId)) {
                            // Add exit class first to trigger exit animation
                            card.classList.add('exit');
                            
                            // After exit animation completes, remove active class
                            setTimeout(() => {
                                card.classList.remove('active');
                            }, animationConfig.exitDelay);
                        }
                    }
                });
            }, {
                threshold: animationConfig.threshold,
                rootMargin: animationConfig.rootMargin
            });
            
            // Feature card observer with entrance AND exit
            const featureObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    const feature = entry.target;
                    const featureId = feature.id;
                    
                    if (entry.isIntersecting) {
                        // ENTRANCE ANIMATION
                        feature.classList.remove('exit');
                        
                        setTimeout(() => {
                            feature.classList.add('active');
                            animatedElements.add(featureId);
                        }, 200);
                    } else {
                        // EXIT ANIMATION - only if element has been animated before
                        if (animatedElements.has(featureId)) {
                            feature.classList.add('exit');
                            
                            setTimeout(() => {
                                feature.classList.remove('active');
                            }, animationConfig.exitDelay);
                        }
                    }
                });
            }, {
                threshold: 0.3
            });
            
            // Observe all cards
            document.querySelectorAll('.map-card').forEach(card => {
                cardObserver.observe(card);
            });
            
            // Observe all feature cards
            document.querySelectorAll('.feature-card').forEach(card => {
                featureObserver.observe(card);
            });
            
            // Add scroll direction detection for enhanced effects
            let lastScrollTop = 0;
            window.addEventListener('scroll', () => {
                const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                const scrollDirection = scrollTop > lastScrollTop ? 'down' : 'up';
                lastScrollTop = scrollTop;
                
                // Optional: Add subtle effects based on scroll direction
                document.querySelectorAll('.map-card').forEach(card => {
                    if (scrollDirection === 'down') {
                        // Slight speed up for entrance when scrolling down
                        card.style.transitionDuration = '0.8s';
                    } else {
                        // Slight slow down for exit when scrolling up
                        card.style.transitionDuration = '1s';
                    }
                });
            });
        }
        
        // Header scroll effect
        window.addEventListener('scroll', () => {
            const header = document.getElementById('mainHeader');
            if (window.scrollY > 50) {
                header.classList.add('header-scrolled');
            } else {
                header.classList.remove('header-scrolled');
            }
        });
        
        // Initialize everything when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize 3D Earth
            initEarth3D();
            
            // Initialize scroll animations with entrance and exit
            initScrollAnimations();
            
            // Smooth scroll for navigation links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    if (targetId !== '#') {
                        const targetElement = document.querySelector(targetId);
                        if (targetElement) {
                            window.scrollTo({
                                top: targetElement.offsetTop - 100,
                                behavior: 'smooth'
                            });
                        }
                    }
                });
            });
            
            // Add hover effect to cards
            document.querySelectorAll('.card-image').forEach(image => {
                image.addEventListener('mouseenter', () => {
                    image.style.transform = 'scale(1.02)';
                });
                
                image.addEventListener('mouseleave', () => {
                    image.style.transform = 'scale(1)';
                });
            });
            
            // Add click effect to buttons
            document.querySelectorAll('.map-button').forEach(button => {
                button.addEventListener('click', function(e) {
                    // Create ripple effect
                    const ripple = document.createElement('span');
                    const rect = this.getBoundingClientRect();
                    const size = Math.max(rect.width, rect.height);
                    const x = e.clientX - rect.left - size / 2;
                    const y = e.clientY - rect.top - size / 2;
                    
                    ripple.style.cssText = `
                        position: absolute;
                        border-radius: 50%;
                        background: rgba(255, 255, 255, 0.3);
                        transform: scale(0);
                        animation: ripple 0.6s linear;
                        width: ${size}px;
                        height: ${size}px;
                        top: ${y}px;
                        left: ${x}px;
                    `;
                    
                    this.appendChild(ripple);
                    
                    setTimeout(() => {
                        ripple.remove();
                    }, 600);
                });
            });
            
            // Add CSS for ripple animation
            const style = document.createElement('style');
            style.textContent = `
                @keyframes ripple {
                    to {
                        transform: scale(4);
                        opacity: 0;
                    }
                }
            `;
            document.head.appendChild(style);
            
            // Add keyboard navigation
            document.addEventListener('keydown', (e) => {
                // Space to scroll to next card
                if (e.key === ' ' && !e.target.matches('input, textarea')) {
                    e.preventDefault();
                    const firstCard = document.querySelector('.map-card');
                    if (firstCard) {
                        firstCard.scrollIntoView({ behavior: 'smooth' });
                    }
                }
            });
            
            // Add scroll progress indicator
            function createScrollIndicator() {
                const indicator = document.createElement('div');
                indicator.id = 'scrollIndicator';
                indicator.innerHTML = '<i class="fas fa-chevron-down"></i>';
                indicator.style.cssText = `
                    position: fixed;
                    bottom: 30px;
                    left: 50%;
                    transform: translateX(-50%);
                    color: var(--cosmic-cyan);
                    font-size: 2rem;
                    animation: bounce 2s infinite;
                    z-index: 1000;
                    cursor: pointer;
                    opacity: 0.7;
                    transition: opacity 0.3s;
                `;
                
                indicator.addEventListener('click', () => {
                    document.querySelector('#maps').scrollIntoView({ behavior: 'smooth' });
                });
                
                document.body.appendChild(indicator);
                
                // Hide when scrolling down
                window.addEventListener('scroll', () => {
                    if (window.scrollY > 100) {
                        indicator.style.opacity = '0';
                        indicator.style.pointerEvents = 'none';
                    } else {
                        indicator.style.opacity = '0.7';
                        indicator.style.pointerEvents = 'auto';
                    }
                });
            }
            
            // Add bounce animation
            const bounceStyle = document.createElement('style');
            bounceStyle.textContent = `
                @keyframes bounce {
                    0%, 20%, 50%, 80%, 100% { transform: translateX(-50%) translateY(0); }
                    40% { transform: translateX(-50%) translateY(-10px); }
                    60% { transform: translateX(-50%) translateY(-5px); }
                }
            `;
            document.head.appendChild(bounceStyle);
            
            // Initialize scroll indicator
            setTimeout(createScrollIndicator, 1000);
            
            // Mobile-friendly dropdown touch support
            const dropdowns = document.querySelectorAll('.dropdown');
            dropdowns.forEach(dropdown => {
                const dropbtn = dropdown.querySelector('.dropbtn');
                const dropdownContent = dropdown.querySelector('.dropdown-content');
                
                dropbtn.addEventListener('click', (e) => {
                    if (window.innerWidth <= 768) {
                        e.preventDefault();
                        const isActive = dropdownContent.style.display === 'block';
                        dropdownContent.style.display = isActive ? 'none' : 'block';
                        dropdownContent.style.opacity = isActive ? '0' : '1';
                        dropdownContent.style.transform = isActive ? 'translateX(-50%) translateY(-10px)' : 'translateX(-50%) translateY(0)';
                    }
                });
                
                // Close dropdown when clicking outside on mobile
                document.addEventListener('click', (e) => {
                    if (window.innerWidth <= 768 && !dropdown.contains(e.target)) {
                        dropdownContent.style.display = 'none';
                        dropdownContent.style.opacity = '0';
                        dropdownContent.style.transform = 'translateX(-50%) translateY(-10px)';
                    }
                });
            });
        });
    </script>
</body>
</html>
