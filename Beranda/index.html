<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beranda - Geoportal Bumiayu Pruwatan</title>
    
    <!-- Three.js for 3D Globe -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/loaders/GLTFLoader.js"></script>
    
    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&family=Exo+2:wght@300;400;600&family=Rajdhani:wght@500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* ===== COSMIC THEME VARIABLES ===== */
        :root {
            --cosmic-deep: #0a0e17;
            --cosmic-dark: #111827;
            --cosmic-blue: #1e90ff;
            --cosmic-cyan: #4cc9f0;
            --cosmic-pink: #f72585;
            --cosmic-gold: #ffcc00;
            --cosmic-light: #f8f9fa;
            --cosmic-card: rgba(10, 14, 23, 0.9);
        }

        /* ===== BASE RESETS ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            overflow-x: hidden;
            font-family: 'Exo 2', sans-serif;
            background: #000000;
            color: var(--cosmic-light);
            scroll-behavior: smooth;
        }

        /* ===== GLOBE HERO SECTION ===== */
        .globe-hero {
            position: relative;
            height: 100vh;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(
                to bottom,
                rgba(0, 0, 0, 0.8) 0%,
                rgba(10, 14, 23, 0.6) 100%
            );
        }

        #earthContainer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .hero-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(
                circle at center,
                transparent 0%,
                rgba(0, 0, 0, 0.7) 100%
            );
            z-index: 2;
            pointer-events: none;
        }

        .hero-content {
            position: relative;
            z-index: 3;
            text-align: center;
            max-width: 800px;
            padding: 2rem;
            animation: fadeInUp 1.5s ease-out;
        }

        .hero-content h2 {
            font-family: 'Orbitron', sans-serif;
            font-size: clamp(2.5rem, 5vw, 4rem);
            margin-bottom: 1.5rem;
            background: linear-gradient(135deg, var(--cosmic-light) 0%, var(--cosmic-cyan) 100%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 30px rgba(76, 201, 240, 0.3);
        }

        .hero-content p {
            font-size: 1.3rem;
            line-height: 1.8;
            margin-bottom: 2.5rem;
            color: rgba(255, 255, 255, 0.9);
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        /* ===== HEADER & NAVIGATION ===== */
        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: rgba(10, 14, 23, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(30, 144, 255, 0.2);
            z-index: 1000;
            padding: 1rem 0;
            transition: all 0.3s ease;
        }

        .header-scrolled {
            background: rgba(10, 14, 23, 0.98);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
        }

        .header-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo img {
            height: 45px;
            width: auto;
            filter: drop-shadow(0 0 10px rgba(30, 144, 255, 0.5));
        }

        .logo h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.4rem;
            background: linear-gradient(135deg, var(--cosmic-light) 0%, var(--cosmic-cyan) 100%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: 0.5px;
        }

        nav {
            display: flex;
            gap: 1.5rem;
            align-items: center;
        }

        nav a {
            color: var(--cosmic-light);
            text-decoration: none;
            font-weight: 600;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        nav a::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(30, 144, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }

        nav a:hover::before {
            left: 100%;
        }

        nav a:hover {
            background: rgba(30, 144, 255, 0.1);
            transform: translateY(-2px);
        }

        nav a.active {
            background: rgba(30, 144, 255, 0.15);
            border: 1px solid rgba(30, 144, 255, 0.4);
        }

        nav i {
            margin-right: 0.5rem;
            color: var(--cosmic-cyan);
        }

        /* ===== INTERACTIVE MAP SECTION ===== */
        .maps-section {
            position: relative;
            z-index: 10;
            padding: 5rem 2rem;
            background: linear-gradient(
                to bottom,
                rgba(10, 14, 23, 0.8) 0%,
                rgba(10, 14, 23, 1) 100%
            );
        }

        .section-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5rem;
            margin-bottom: 3rem;
            color: var(--cosmic-cyan);
            position: relative;
            display: inline-block;
            text-align: center;
            width: 100%;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--cosmic-cyan), transparent);
            border-radius: 2px;
        }

        /* ===== MAP CARDS LAYOUT ===== */
        .map-cards-container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .map-card {
            display: flex;
            align-items: center;
            gap: 4rem;
            margin-bottom: 8rem;
            opacity: 0;
            transform: translateY(50px);
            transition: all 1s ease-out;
        }

        .map-card.active {
            opacity: 1;
            transform: translateY(0);
        }

        .map-card.exiting {
            opacity: 0.3;
            transform: translateY(-30px);
        }

        .map-card:nth-child(even) {
            flex-direction: row-reverse;
        }

        .card-content {
            flex: 1;
            padding: 2rem;
        }

        .card-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.2rem;
            margin-bottom: 1.5rem;
            color: var(--cosmic-cyan);
            position: relative;
            display: inline-block;
        }

        .card-title::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, var(--cosmic-blue), var(--cosmic-cyan));
        }

        .card-description {
            font-size: 1.1rem;
            line-height: 1.8;
            color: rgba(255, 255, 255, 0.85);
            margin-bottom: 2rem;
        }

        .card-features {
            list-style: none;
            margin-bottom: 2rem;
        }

        .card-features li {
            margin-bottom: 0.8rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            color: rgba(255, 255, 255, 0.8);
        }

        .card-features i {
            color: var(--cosmic-cyan);
            font-size: 1.1rem;
        }

        .card-image {
            flex: 1;
            position: relative;
            overflow: hidden;
            border-radius: 15px;
            box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.6),
                0 0 0 1px rgba(30, 144, 255, 0.3),
                0 0 50px rgba(30, 144, 255, 0.2);
            transition: all 0.5s ease;
            height: 400px;
        }

        .card-image:hover {
            transform: translateY(-10px);
            box-shadow: 
                0 30px 80px rgba(0, 0, 0, 0.8),
                0 0 0 1px rgba(30, 144, 255, 0.5),
                0 0 80px rgba(30, 144, 255, 0.4);
        }

        .card-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .card-image:hover img {
            transform: scale(1.05);
        }

        .map-button {
            display: inline-flex;
            align-items: center;
            gap: 0.8rem;
            background: rgba(30, 144, 255, 0.1);
            color: var(--cosmic-cyan);
            padding: 1rem 2rem;
            border-radius: 8px;
            text-decoration: none;
            font-family: 'Rajdhani', sans-serif;
            font-weight: 600;
            border: 1px solid rgba(30, 144, 255, 0.3);
            transition: all 0.3s ease;
        }

        .map-button:hover {
            background: rgba(30, 144, 255, 0.2);
            transform: translateY(-3px);
            border-color: var(--cosmic-blue);
            box-shadow: 0 10px 30px rgba(30, 144, 255, 0.2);
        }

        /* ===== FEATURE CARDS ===== */
        .feature-section {
            padding: 5rem 2rem;
            background: rgba(10, 14, 23, 0.95);
        }

        .feature-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .feature-card {
            background: var(--cosmic-card);
            backdrop-filter: blur(20px);
            border-radius: 15px;
            padding: 2.5rem 2rem;
            border: 1px solid rgba(30, 144, 255, 0.2);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            opacity: 0;
            transform: translateY(30px);
        }

        .feature-card.active {
            opacity: 1;
            transform: translateY(0);
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--cosmic-blue), var(--cosmic-cyan));
        }

        .feature-card:hover {
            transform: translateY(-10px);
            border-color: var(--cosmic-blue);
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.4),
                0 0 60px rgba(30, 144, 255, 0.1);
        }

        .feature-card i {
            font-size: 2.5rem;
            color: var(--cosmic-cyan);
            margin-bottom: 1.5rem;
            display: block;
        }

        .feature-card h4 {
            font-family: 'Rajdhani', sans-serif;
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: var(--cosmic-light);
        }

        .feature-card p {
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.6;
        }

        /* ===== FOOTER ===== */
        footer {
            background: rgba(5, 9, 16, 0.98);
            border-top: 1px solid rgba(30, 144, 255, 0.2);
            padding: 3rem 2rem;
            position: relative;
            z-index: 10;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            text-align: center;
        }

        footer p {
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 1rem;
            line-height: 1.6;
        }

        footer a {
            color: var(--cosmic-cyan);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        footer a:hover {
            color: var(--cosmic-blue);
            text-decoration: underline;
        }

        /* ===== RESPONSIVE DESIGN ===== */
        @media (max-width: 1200px) {
            .map-card {
                gap: 3rem;
            }
            
            .card-image {
                height: 350px;
            }
        }

        @media (max-width: 992px) {
            .header-container {
                flex-direction: column;
                gap: 1.5rem;
                padding: 1rem;
            }
            
            nav {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .map-card {
                flex-direction: column !important;
                gap: 3rem;
                margin-bottom: 5rem;
            }
            
            .card-content {
                padding: 1rem;
            }
            
            .card-image {
                height: 300px;
                width: 100%;
            }
            
            .section-title {
                font-size: 2rem;
            }
            
            .card-title {
                font-size: 1.8rem;
            }
        }

        @media (max-width: 768px) {
            .header-container {
                padding: 1rem;
            }
            
            nav {
                gap: 0.5rem;
            }
            
            nav a {
                padding: 0.5rem;
                font-size: 0.9rem;
            }
            
            .hero-content h2 {
                font-size: 2rem;
            }
            
            .hero-content p {
                font-size: 1.1rem;
            }
            
            .maps-section {
                padding: 3rem 1rem;
            }
            
            .feature-section {
                padding: 3rem 1rem;
            }
            
            .feature-cards {
                grid-template-columns: 1fr;
            }
            
            .feature-card {
                padding: 2rem 1.5rem;
            }
        }

        @media (max-width: 480px) {
            .logo h1 {
                font-size: 1.2rem;
            }
            
            .hero-content h2 {
                font-size: 1.8rem;
            }
            
            .hero-content p {
                font-size: 1rem;
            }
            
            .section-title {
                font-size: 1.8rem;
            }
            
            .card-title {
                font-size: 1.5rem;
            }
            
            .card-image {
                height: 250px;
            }
        }

        /* ===== ANIMATIONS ===== */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        /* ===== SCROLLBAR STYLING ===== */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--cosmic-deep);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--cosmic-blue);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--cosmic-cyan);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header id="mainHeader">
        <div class="header-container">
            <div class="logo">
                <img src="images/logo.png" alt="Logo Geoportal">
                <h1>Geoportal Bumiayu Pruwatan</h1>
            </div>
            <nav>
                <a href="../Beranda/" class="active"><i class="fas fa-home"></i> Beranda</a>
                <a href="../Bumiayu/"><i class="fas fa-map"></i> Peta Bumiayu</a>
                <a href="../Pruwatan/"><i class="fas fa-map-marked-alt"></i> Peta Pruwatan</a>
                <a href="../Tentang/"><i class="fas fa-info-circle"></i> Tentang</a>
            </nav>
        </div>
    </header>

    <!-- Globe Hero Section -->
    <section class="globe-hero">
        <div id="earthContainer"></div>
        <div class="hero-overlay"></div>
        <div class="hero-content">
            <h2>Satu Peta untuk Data Spasial Terpadu</h2>
            <p>Portal ini menyajikan peta interaktif dan data geospasial wilayah Bumiayu dan Pruwatan untuk perencanaan dan pengembangan wilayah dalam pengalaman 3D cosmic.</p>
            <a href="#maps" class="map-button">
                <i class="fas fa-chevron-down"></i>
                Jelajahi Peta
            </a>
        </div>
    </section>

    <!-- Interactive Maps Section -->
    <section class="maps-section" id="maps">
        <h2 class="section-title">Peta Interaktif 3D</h2>
        
        <div class="map-cards-container">
            <!-- Kecamatan Bumiayu Card -->
            <div class="map-card" id="card1">
                <div class="card-content">
                    <h3 class="card-title">Kecamatan Bumiayu</h3>
                    <p class="card-description">
                        Kecamatan Bumiayu merupakan wilayah administratif yang terletak di Kabupaten Brebes, Jawa Tengah. 
                        Dengan luas wilayah 12.456 hektar, kecamatan ini terdiri dari 15 desa yang kaya akan potensi pertanian, 
                        perkebunan, dan pariwisata alam.
                    </p>
                    <ul class="card-features">
                        <li><i class="fas fa-check-circle"></i> Data batas administratif lengkap</li>
                        <li><i class="fas fa-check-circle"></i> Informasi penggunaan lahan</li>
                        <li><i class="fas fa-check-circle"></i> Fasilitas publik dan infrastruktur</li>
                        <li><i class="fas fa-check-circle"></i> Data demografi dan sosial</li>
                    </ul>
                    <a href="../Bumiayu/" class="map-button">
                        <i class="fas fa-map"></i>
                        Buka Peta Bumiayu
                    </a>
                </div>
                <div class="card-image">
                    <img src="images/map-thumbnail.png" alt="Peta Kecamatan Bumiayu">
                </div>
            </div>

            <!-- Desa Pruwatan Card -->
            <div class="map-card" id="card2">
                <div class="card-content">
                    <h3 class="card-title">Desa Pruwatan</h3>
                    <p class="card-description">
                        Desa Pruwatan adalah salah satu desa di Kecamatan Bumiayu yang memiliki karakteristik geografis 
                        unik dengan perbukitan dan lahan pertanian yang subur. Desa ini berkembang pesat dalam sektor 
                        pertanian dan memiliki potensi wisata alam yang menarik.
                    </p>
                    <ul class="card-features">
                        <li><i class="fas fa-check-circle"></i> Detail penggunaan lahan pertanian</li>
                        <li><i class="fas fa-check-circle"></i> Jaringan irigasi dan sumber air</li>
                        <li><i class="fas fa-check-circle"></i> Fasilitas pendidikan dan kesehatan</li>
                        <li><i class="fas fa-check-circle"></i> Potensi wisata alam</li>
                    </ul>
                    <a href="../Pruwatan/" class="map-button">
                        <i class="fas fa-map-marked-alt"></i>
                        Buka Peta Pruwatan
                    </a>
                </div>
                <div class="card-image">
                    <img src="images/map-thumbnail.png" alt="Peta Desa Pruwatan">
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="feature-section">
        <h2 class="section-title">Fitur Unggulan</h2>
        <div class="feature-cards">
            <div class="feature-card" id="feature1">
                <i class="fas fa-layer-group"></i>
                <h4>Layers Berlapis 3D</h4>
                <p>Tampilkan lapisan peta seperti batas administrasi, jalan, dan penggunaan lahan dalam pengalaman 3D interaktif.</p>
            </div>
            <div class="feature-card" id="feature2">
                <i class="fas fa-download"></i>
                <h4>Unduh Data Spasial</h4>
                <p>Data geospasial tersedia dalam format Shapefile, GeoJSON, atau KML dengan metadata lengkap.</p>
            </div>
            <div class="feature-card" id="feature3">
                <i class="fas fa-search-location"></i>
                <h4>Pencarian Lokasi Cerdas</h4>
                <p>Cari lokasi berdasarkan nama desa, kecamatan, atau koordinat dengan sistem pencarian real-time.</p>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <p>© 2025 Geoportal Bumiayu Pruwatan. Dibangun dengan QGIS, Three.js, Leaflet, dan GitHub Pages.</p>
            <p>Kontak: <a href="mailto:haidarhisyam1823@gmail.com">haidarhisyam1823@gmail.com</a></p>
            <p>Theme: Cosmic Exploration • v2.0</p>
        </div>
    </footer>

    <script>
        // ======================
        // 3D EARTH FOR BERANDA
        // ======================
        
        let scene, camera, renderer, earth;
        let controls;
        
        function initEarth3D() {
            // 1. Create scene
            scene = new THREE.Scene();
            
            // 2. Create camera
            camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 3; // Adjust zoom level
            
            // 3. Create renderer
            renderer = new THREE.WebGLRenderer({ 
                alpha: true, 
                antialias: true,
                powerPreference: "high-performance"
            });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            
            const earthContainer = document.getElementById('earthContainer');
            earthContainer.appendChild(renderer.domElement);
            
            // 4. Add enhanced lighting
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.8);
            scene.add(ambientLight);
            
            const directionalLight1 = new THREE.DirectionalLight(0xffffff, 1);
            directionalLight1.position.set(5, 3, 5);
            scene.add(directionalLight1);
            
            const directionalLight2 = new THREE.DirectionalLight(0x4cc9f0, 0.5);
            directionalLight2.position.set(-5, -3, 5);
            scene.add(directionalLight2);
            
            // 5. Add subtle background stars
            createStarfield();
            
            // 6. Load Earth model
            const loader = new THREE.GLTFLoader();
            
            loader.load(
                '../assets/3d-models/earth.glb',
                function(gltf) {
                    earth = gltf.scene;
                    
                    // Apply user's adjustments
                    earth.scale.set(0.4, 0.4, 0.4);
                    
                    // Apply Indonesia rotation
                    const targetRotationY = Math.PI + (155 * Math.PI / 190);
                    earth.rotation.y = targetRotationY;
                    
                    // Center the earth
                    earth.position.set(0, 0, 0);
                    
                    // Enable shadows
                    earth.traverse(function(node) {
                        if (node.isMesh) {
                            node.castShadow = true;
                            node.receiveShadow = true;
                            // Add subtle glow effect
                            node.material.emissive = new THREE.Color(0x0a0e17);
                            node.material.emissiveIntensity = 0.1;
                        }
                    });
                    
                    scene.add(earth);
                    
                    // Add orbit controls for interaction
                    controls = new THREE.OrbitControls(camera, renderer.domElement);
                    controls.enableDamping = true;
                    controls.dampingFactor = 0.05;
                    controls.enableZoom = false; // Disable zoom to maintain position
                    controls.enablePan = false;
                    controls.enableRotate = true;
                    controls.rotateSpeed = 0.5;
                    controls.maxPolarAngle = Math.PI;
                    controls.minPolarAngle = 0;
                    
                    // Start animation
                    animate();
                    
                    // Add subtle auto-rotation
                    setTimeout(() => {
                        if (earth) {
                            earth.rotation.y += 0.0005;
                        }
                    }, 1000);
                },
                function(xhr) {
                    console.log((xhr.loaded / xhr.total * 100) + '% loaded');
                },
                function(error) {
                    console.error('Error loading Earth model:', error);
                    createFallbackEarth();
                }
            );
            
            // 7. Handle window resize
            window.addEventListener('resize', onWindowResize);
        }
        
        function createFallbackEarth() {
            const geometry = new THREE.SphereGeometry(1, 32, 32);
            const material = new THREE.MeshPhongMaterial({
                color: 0x1e90ff,
                shininess: 30,
                specular: 0x111111
            });
            
            earth = new THREE.Mesh(geometry, material);
            earth.scale.set(0.4, 0.4, 0.4);
            const targetRotationY = Math.PI + (155 * Math.PI / 190);
            earth.rotation.y = targetRotationY;
            scene.add(earth);
            
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            controls.enableZoom = false;
            controls.enablePan = false;
            
            animate();
        }
        
        function createStarfield() {
            const starGeometry = new THREE.BufferGeometry();
            const starCount = 800;
            const positions = new Float32Array(starCount * 3);
            
            for (let i = 0; i < starCount * 3; i += 3) {
                positions[i] = (Math.random() - 0.5) * 2000;
                positions[i + 1] = (Math.random() - 0.5) * 2000;
                positions[i + 2] = (Math.random() - 0.5) * 2000;
            }
            
            starGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
            
            const starMaterial = new THREE.PointsMaterial({
                color: 0xffffff,
                size: 0.5,
                transparent: true,
                opacity: 0.7
            });
            
            const stars = new THREE.Points(starGeometry, starMaterial);
            scene.add(stars);
        }
        
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }
        
        function animate() {
            requestAnimationFrame(animate);
            
            // Very slow auto-rotation
            if (earth) {
                earth.rotation.y += 0.0001;
            }
            
            if (controls) controls.update();
            renderer.render(scene, camera);
        }
        
        // ======================
        // SCROLL ANIMATIONS
        // ======================
        
        // Header scroll effect
        window.addEventListener('scroll', () => {
            const header = document.getElementById('mainHeader');
            if (window.scrollY > 50) {
                header.classList.add('header-scrolled');
            } else {
                header.classList.remove('header-scrolled');
            }
            
            // Card entrance/exit animations
            updateCardAnimations();
        });
        
        function updateCardAnimations() {
            const cards = document.querySelectorAll('.map-card');
            const features = document.querySelectorAll('.feature-card');
            const scrollPosition = window.scrollY + window.innerHeight;
            
            // Map Cards Animation
            cards.forEach((card, index) => {
                const cardPosition = card.offsetTop;
                const cardHeight = card.offsetHeight;
                
                if (scrollPosition > cardPosition + cardHeight * 0.3) {
                    card.classList.add('active');
                    card.classList.remove('exiting');
                } else if (scrollPosition < cardPosition - window.innerHeight * 0.5) {
                    card.classList.remove('active');
                    card.classList.add('exiting');
                } else {
                    card.classList.remove('exiting');
                }
                
                // Parallax effect for images
                const image = card.querySelector('.card-image');
                const speed = 0.1;
                const yPos = -(scrollPosition - cardPosition) * speed;
                image.style.transform = `translateY(${yPos}px) scale(1.02)`;
            });
            
            // Feature Cards Animation
            features.forEach((feature, index) => {
                const featurePosition = feature.offsetTop;
                
                if (scrollPosition > featurePosition + 100) {
                    feature.classList.add('active');
                    // Stagger the animation
                    feature.style.transitionDelay = `${index * 0.2}s`;
                }
            });
        }
        
        // Initialize everything
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize 3D Earth
            initEarth3D();
            
            // Smooth scroll for navigation links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    if (targetId !== '#') {
                        const targetElement = document.querySelector(targetId);
                        if (targetElement) {
                            window.scrollTo({
                                top: targetElement.offsetTop - 80,
                                behavior: 'smooth'
                            });
                        }
                    }
                });
            });
            
            // Initialize card animations
            updateCardAnimations();
            
            // Auto-hide header on scroll down
            let lastScrollTop = 0;
            const header = document.getElementById('mainHeader');
            
            window.addEventListener('scroll', () => {
                const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                
                if (scrollTop > lastScrollTop && scrollTop > 200) {
                    // Scrolling down
                    header.style.transform = 'translateY(-100%)';
                } else {
                    // Scrolling up
                    header.style.transform = 'translateY(0)';
                }
                
                lastScrollTop = scrollTop;
            });
            
            // Add hover effect to cards
            document.querySelectorAll('.card-image').forEach(image => {
                image.addEventListener('mouseenter', () => {
                    image.style.transform = 'scale(1.05)';
                });
                
                image.addEventListener('mouseleave', () => {
                    image.style.transform = 'scale(1)';
                });
            });
        });
        
        // Add keyboard controls
        document.addEventListener('keydown', (e) => {
            // Space to pause/play earth rotation
            if (e.key === ' ') {
                if (controls) {
                    controls.autoRotate = !controls.autoRotate;
                }
            }
            
            // Arrow keys to navigate cards
            if (e.key === 'ArrowDown') {
                window.scrollBy({ top: window.innerHeight * 0.8, behavior: 'smooth' });
            }
            
            if (e.key === 'ArrowUp') {
                window.scrollBy({ top: -window.innerHeight * 0.8, behavior: 'smooth' });
            }
        });
    </script>
</body>
</html>
