<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beranda - Geoportal Bumiayu Pruwatan</title>
    
    <!-- Three.js for 3D Globe -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/loaders/GLTFLoader.js"></script>
    
    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&family=Exo+2:wght@300;400;600&family=Rajdhani:wght@500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* ===== COSMIC THEME VARIABLES ===== */
        :root {
            --cosmic-deep: #0a0e17;
            --cosmic-dark: #111827;
            --cosmic-blue: #1e90ff;
            --cosmic-cyan: #4cc9f0;
            --cosmic-pink: #f72585;
            --cosmic-gold: #ffcc00;
            --cosmic-light: #f8f9fa;
            --cosmic-card: rgba(10, 14, 23, 0.9);
        }

        /* ===== BASE RESETS ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            overflow-x: hidden;
            font-family: 'Exo 2', sans-serif;
            background: #000000;
            color: var(--cosmic-light);
            scroll-behavior: smooth;
        }

        /* ===== GLOBE HERO SECTION ===== */
        .globe-hero {
            position: relative;
            height: 100vh;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(
                to bottom,
                rgba(0, 0, 0, 0.8) 0%,
                rgba(10, 14, 23, 0.6) 100%
            );
        }

        #earthContainer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .hero-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(
                circle at center,
                transparent 0%,
                rgba(0, 0, 0, 0.7) 100%
            );
            z-index: 2;
            pointer-events: none;
        }

        .hero-content {
            position: relative;
            z-index: 3;
            text-align: center;
            max-width: 800px;
            padding: 2rem;
            animation: fadeInUp 1.5s ease-out;
        }

        .hero-content h2 {
            font-family: 'Orbitron', sans-serif;
            font-size: clamp(2.5rem, 5vw, 4rem);
            margin-bottom: 1.5rem;
            background: linear-gradient(135deg, var(--cosmic-light) 0%, var(--cosmic-cyan) 100%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 30px rgba(76, 201, 240, 0.3);
        }

        .hero-content p {
            font-size: 1.3rem;
            line-height: 1.8;
            margin-bottom: 2.5rem;
            color: rgba(255, 255, 255, 0.9);
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        /* ===== HEADER & NAVIGATION ===== */
        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: rgba(10, 14, 23, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(30, 144, 255, 0.2);
            z-index: 1000;
            padding: 1rem 0;
            transition: all 0.3s ease;
        }

        .header-scrolled {
            background: rgba(10, 14, 23, 0.98);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
        }

        .header-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo img {
            height: 45px;
            width: auto;
            filter: drop-shadow(0 0 10px rgba(30, 144, 255, 0.5));
        }

        .logo h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.4rem;
            background: linear-gradient(135deg, var(--cosmic-light) 0%, var(--cosmic-cyan) 100%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: 0.5px;
        }

        nav {
            display: flex;
            gap: 1.5rem;
            align-items: center;
        }

        nav a {
            color: var(--cosmic-light);
            text-decoration: none;
            font-weight: 600;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        nav a::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(30, 144, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }

        nav a:hover::before {
            left: 100%;
        }

        nav a:hover {
            background: rgba(30, 144, 255, 0.1);
            transform: translateY(-2px);
        }

        nav a.active {
            background: rgba(30, 144, 255, 0.15);
            border: 1px solid rgba(30, 144, 255, 0.4);
        }

        nav i {
            margin-right: 0.5rem;
            color: var(--cosmic-cyan);
        }

        /* ===== ENHANCED INTERACTIVE MAP SECTION ===== */
        .maps-section {
            position: relative;
            z-index: 10;
            padding: 6rem 2rem;
            background: linear-gradient(
                to bottom,
                rgba(10, 14, 23, 0.95) 0%,
                rgba(10, 14, 23, 1) 100%
            );
            min-height: 100vh;
        }

        .section-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 3rem;
            margin-bottom: 4rem;
            color: var(--cosmic-cyan);
            position: relative;
            display: inline-block;
            text-align: center;
            width: 100%;
            animation: titleFloat 3s ease-in-out infinite;
        }

        @keyframes titleFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 300px;
            height: 4px;
            background: linear-gradient(90deg, transparent, var(--cosmic-cyan), transparent);
            border-radius: 2px;
        }

        .title-subtext {
            text-align: center;
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 5rem;
            font-weight: 300;
            letter-spacing: 1px;
            animation: fadeIn 2s ease-out;
        }

        /* ===== ENHANCED MAP CARDS LAYOUT ===== */
        /* GANTI kode .map-card yang ada dengan ini: */
        .map-card {
            display: flex;
            align-items: center;
            gap: 3rem; /* Kurangi dari 5rem */
            margin-bottom: 6rem; /* Kurangi dari 10rem */
            opacity: 0;
            transform: translateY(80px); /* Kurangi dari 100px */
            transition: all 1s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            padding: 2rem;
            border-radius: 20px;
            background: linear-gradient(
                145deg,
                rgba(20, 25, 35, 0.8) 0%,
                rgba(10, 14, 23, 0.6) 100%
            );
            overflow: hidden;
            min-height: 450px; /* Tambahkan tinggi minimum */
        }
        
        /* Tambahkan class ini di CSS: */
        .maps-section {
            min-height: auto !important; /* Ubah dari 100vh */
            padding-bottom: 4rem !important;
        }
        
        .map-cards-container {
            padding-bottom: 4rem;
        }
        
        /* Pastikan card-image memiliki fallback */
        .card-image {
            background: linear-gradient(45deg, #0a0e17, #1a1f2e);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .card-image::before {
            content: "Preview Peta";
            position: absolute;
            color: rgba(255,255,255,0.5);
            font-size: 1.2rem;
            z-index: 1;
        }
        
        .card-image img {
            position: relative;
            z-index: 2;
        }
        .map-card:hover::before {
            opacity: 1;
        }

        .map-card.active {
            opacity: 1;
            transform: translateY(0);
        }

        .map-card:nth-child(odd) {
            flex-direction: row;
        }

        .map-card:nth-child(even) {
            flex-direction: row-reverse;
        }

        .card-content {
            flex: 1;
            padding: 3rem;
            position: relative;
            z-index: 2;
        }

        .card-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5rem;
            margin-bottom: 2rem;
            color: var(--cosmic-cyan);
            position: relative;
            display: inline-block;
            text-shadow: 0 0 20px rgba(76, 201, 240, 0.3);
        }

        .card-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, var(--cosmic-blue), var(--cosmic-cyan));
            border-radius: 2px;
        }

        .location-badge {
            display: inline-block;
            background: rgba(30, 144, 255, 0.1);
            color: var(--cosmic-cyan);
            padding: 0.5rem 1.5rem;
            border-radius: 20px;
            font-size: 0.9rem;
            margin-bottom: 1.5rem;
            border: 1px solid rgba(30, 144, 255, 0.3);
            animation: badgePulse 2s ease-in-out infinite;
        }

        @keyframes badgePulse {
            0%, 100% { box-shadow: 0 0 0 rgba(30, 144, 255, 0); }
            50% { box-shadow: 0 0 20px rgba(30, 144, 255, 0.3); }
        }

        .card-description {
            font-size: 1.2rem;
            line-height: 1.8;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 2.5rem;
            font-weight: 300;
        }

        .card-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .stat-item {
            background: rgba(20, 25, 35, 0.5);
            padding: 1.5rem;
            border-radius: 10px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .stat-item:hover {
            transform: translateY(-5px);
            background: rgba(30, 144, 255, 0.1);
        }

        .stat-value {
            font-family: 'Orbitron', sans-serif;
            font-size: 2rem;
            color: var(--cosmic-cyan);
            margin-bottom: 0.5rem;
        }

        .stat-label {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
        }

        .card-image {
            flex: 1;
            position: relative;
            overflow: hidden;
            border-radius: 20px;
            height: 450px;
            transform-style: preserve-3d;
            perspective: 1000px;
            box-shadow: 
                0 25px 80px rgba(0, 0, 0, 0.8),
                0 0 0 2px rgba(30, 144, 255, 0.4),
                inset 0 0 30px rgba(0, 0, 0, 0.5);
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .card-image:hover {
            transform: scale(1.05) rotateY(5deg);
            box-shadow: 
                0 40px 120px rgba(0, 0, 0, 1),
                0 0 0 3px rgba(30, 144, 255, 0.6),
                0 0 100px rgba(30, 144, 255, 0.3),
                inset 0 0 50px rgba(0, 0, 0, 0.7);
        }

        .card-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 1.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .card-image:hover img {
            transform: scale(1.1);
        }

        .image-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 2rem;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s ease;
        }

        .card-image:hover .image-overlay {
            opacity: 1;
            transform: translateY(0);
        }

        .map-button {
            display: inline-flex;
            align-items: center;
            gap: 1rem;
            background: linear-gradient(135deg, 
                rgba(30, 144, 255, 0.2) 0%,
                rgba(76, 201, 240, 0.1) 100%);
            color: var(--cosmic-cyan);
            padding: 1.2rem 2.5rem;
            border-radius: 12px;
            text-decoration: none;
            font-family: 'Rajdhani', sans-serif;
            font-weight: 700;
            font-size: 1.1rem;
            border: 2px solid rgba(30, 144, 255, 0.4);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .map-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.2), 
                transparent);
            transition: left 0.8s ease;
        }

        .map-button:hover::before {
            left: 100%;
        }

        .map-button:hover {
            transform: translateY(-5px) scale(1.05);
            background: linear-gradient(135deg, 
                rgba(30, 144, 255, 0.3) 0%,
                rgba(76, 201, 240, 0.2) 100%);
            border-color: var(--cosmic-blue);
            box-shadow: 
                0 15px 40px rgba(30, 144, 255, 0.3),
                0 0 60px rgba(30, 144, 255, 0.2);
        }

        /* ===== FEATURE CARDS ===== */
        .feature-section {
            padding: 6rem 2rem;
            background: rgba(10, 14, 23, 0.98);
            position: relative;
            overflow: hidden;
        }

        .feature-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(
                circle at 30% 50%,
                rgba(30, 144, 255, 0.05) 0%,
                transparent 50%
            );
            pointer-events: none;
        }

        .feature-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 3rem;
            max-width: 1400px;
            margin: 4rem auto 0;
        }

        .feature-card {
            background: linear-gradient(
                145deg,
                rgba(20, 25, 35, 0.8) 0%,
                rgba(10, 14, 23, 0.6) 100%
            );
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 3rem 2.5rem;
            border: 1px solid rgba(30, 144, 255, 0.3);
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            opacity: 0;
            transform: translateY(50px);
        }

        .feature-card.active {
            opacity: 1;
            transform: translateY(0);
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--cosmic-blue), var(--cosmic-cyan));
        }

        .feature-card:hover {
            transform: translateY(-15px) scale(1.02);
            border-color: var(--cosmic-blue);
            box-shadow: 
                0 30px 80px rgba(0, 0, 0, 0.5),
                0 0 80px rgba(30, 144, 255, 0.2);
        }

        .feature-card i {
            font-size: 3.5rem;
            color: var(--cosmic-cyan);
            margin-bottom: 2rem;
            display: block;
            text-shadow: 0 0 20px rgba(76, 201, 240, 0.5);
            animation: iconFloat 3s ease-in-out infinite;
        }

        @keyframes iconFloat {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-10px) scale(1.1); }
        }

        .feature-card h4 {
            font-family: 'Rajdhani', sans-serif;
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            color: var(--cosmic-light);
            position: relative;
            display: inline-block;
        }

        .feature-card h4::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 60px;
            height: 2px;
            background: var(--cosmic-cyan);
        }

        .feature-card p {
            color: rgba(255, 255, 255, 0.85);
            line-height: 1.7;
            font-size: 1.1rem;
            font-weight: 300;
        }

        /* ===== FOOTER ===== */
        footer {
            background: rgba(5, 9, 16, 0.98);
            border-top: 1px solid rgba(30, 144, 255, 0.2);
            padding: 4rem 2rem;
            position: relative;
            z-index: 10;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            text-align: center;
        }

        footer p {
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 1rem;
            line-height: 1.6;
        }

        footer a {
            color: var(--cosmic-cyan);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        footer a:hover {
            color: var(--cosmic-blue);
            text-decoration: underline;
        }

        /* ===== RESPONSIVE DESIGN ===== */
        @media (max-width: 1200px) {
            .map-card {
                gap: 3rem;
            }
            
            .card-image {
                height: 400px;
            }
            
            .card-stats {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 992px) {
            .header-container {
                flex-direction: column;
                gap: 1.5rem;
                padding: 1rem;
            }
            
            nav {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .map-card {
                flex-direction: column !important;
                gap: 3rem;
                margin-bottom: 6rem;
                padding: 2rem 1.5rem;
            }
            
            .card-content {
                padding: 2rem 1rem;
            }
            
            .card-image {
                height: 350px;
                width: 100%;
            }
            
            .section-title {
                font-size: 2.5rem;
            }
            
            .card-title {
                font-size: 2rem;
            }
            
            .feature-cards {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .header-container {
                padding: 1rem;
            }
            
            nav {
                gap: 0.5rem;
            }
            
            nav a {
                padding: 0.5rem;
                font-size: 0.9rem;
            }
            
            .hero-content h2 {
                font-size: 2rem;
            }
            
            .hero-content p {
                font-size: 1.1rem;
            }
            
            .maps-section {
                padding: 4rem 1rem;
            }
            
            .feature-section {
                padding: 4rem 1rem;
            }
            
            .feature-cards {
                grid-template-columns: 1fr;
            }
            
            .feature-card {
                padding: 2.5rem 2rem;
            }
            
            .card-image {
                height: 300px;
            }
            
            .section-title {
                font-size: 2rem;
            }
            
            .card-title {
                font-size: 1.8rem;
            }
        }

        @media (max-width: 480px) {
            .logo h1 {
                font-size: 1.2rem;
            }
            
            .hero-content h2 {
                font-size: 1.8rem;
            }
            
            .hero-content p {
                font-size: 1rem;
            }
            
            .section-title {
                font-size: 1.8rem;
            }
            
            .card-title {
                font-size: 1.6rem;
            }
            
            .card-image {
                height: 250px;
            }
            
            .map-button {
                padding: 1rem 2rem;
                font-size: 1rem;
            }
            
            .stat-item {
                padding: 1rem;
            }
            
            .stat-value {
                font-size: 1.5rem;
            }
        }

        /* ===== ANIMATIONS ===== */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-100px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(100px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .animate-fade-in {
            animation: fadeIn 1s ease-out forwards;
        }

        /* ===== SCROLLBAR STYLING ===== */
        ::-webkit-scrollbar {
            width: 12px;
        }

        ::-webkit-scrollbar-track {
            background: var(--cosmic-deep);
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(var(--cosmic-blue), var(--cosmic-cyan));
            border-radius: 6px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(var(--cosmic-cyan), var(--cosmic-blue));
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header id="mainHeader">
        <div class="header-container">
            <div class="logo">
                <img src="images/logo.png" alt="Logo Geoportal">
                <h1>Geoportal Bumiayu Pruwatan</h1>
            </div>
            <nav>
                <a href="../Beranda/" class="active"><i class="fas fa-home"></i> Beranda</a>
                <a href="../Bumiayu/"><i class="fas fa-map"></i> Peta Bumiayu</a>
                <a href="../Pruwatan/"><i class="fas fa-map-marked-alt"></i> Peta Pruwatan</a>
                <a href="../Tentang/"><i class="fas fa-info-circle"></i> Tentang</a>
            </nav>
        </div>
    </header>

    <!-- Globe Hero Section -->
    <section class="globe-hero">
        <div id="earthContainer"></div>
        <div class="hero-overlay"></div>
        <div class="hero-content">
            <h2>Satu Peta untuk Data Spasial Terpadu</h2>
            <p>Portal ini menyajikan peta interaktif dan data geospasial wilayah Bumiayu dan Pruwatan untuk perencanaan dan pengembangan wilayah Kecamatan Bumiayu dan Desa Pruwatan</p>
            <a href="#maps" class="map-button">
                <i class="fas fa-chevron-down"></i>
                Jelajahi Peta
            </a>
        </div>
    </section>

    <!-- Enhanced Interactive Maps Section -->
    <!-- Enhanced Interactive Maps Section -->
    <section class="maps-section" id="maps">
        <h2 class="section-title">Peta Interaktif 3D</h2>
        <p class="title-subtext">Jelajahi data geospasial wilayah Bumiayu dan Pruwatan dengan pengalaman visual yang imersif</p>
        
        <div class="map-cards-container">
            <!-- Kecamatan Bumiayu Card -->
            <div class="map-card active" id="bumiayu-card" style="opacity: 1; transform: translateY(0);">
                <div class="card-content">
                    <span class="location-badge">
                        <i class="fas fa-map-marker-alt"></i> KECAMATAN
                    </span>
                    <h3 class="card-title">Bumiayu</h3>
                    <p class="card-description">
                        Kecamatan Bumiayu merupakan pusat pemerintahan dan aktivitas ekonomi di wilayah selatan Kabupaten Brebes. 
                        Dengan luas wilayah 12.456 hektar, kecamatan ini memiliki 15 desa yang kaya akan potensi pertanian, 
                        perkebunan, dan pariwisata alam yang tersebar di dataran tinggi dan lereng gunung.
                    </p>
                    
                    <div class="card-stats">
                        <div class="stat-item">
                            <div class="stat-value">15</div>
                            <div class="stat-label">Desa</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">12,456</div>
                            <div class="stat-label">Hektar Luas</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">85%</div>
                            <div class="stat-label">Lahan Pertanian</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">7</div>
                            <div class="stat-label">Fasilitas Wisata</div>
                        </div>
                    </div>
                    
                    <a href="../Bumiayu/" class="map-button">
                        <i class="fas fa-map"></i>
                        Jelajahi Peta Bumiayu
                    </a>
                </div>
                <div class="card-image">
                    <div style="width:100%;height:100%;background:linear-gradient(45deg,#1a237e,#0d47a1);display:flex;align-items:center;justify-content:center;color:white;">
                        <span>Peta Bumiayu Preview</span>
                    </div>
                </div>
            </div>
    
            <!-- Desa Pruwatan Card -->
            <div class="map-card active" id="pruwatan-card" style="opacity: 1; transform: translateY(0); margin-top: 4rem;">
                <div class="card-content">
                    <span class="location-badge">
                        <i class="fas fa-map-pin"></i> DESA
                    </span>
                    <h3 class="card-title">Pruwatan</h3>
                    <p class="card-description">
                        Desa Pruwatan adalah desa yang berkembang pesat di Kecamatan Bumiayu dengan karakteristik geografis 
                        unik berupa perbukitan dan lahan pertanian yang subur. Desa ini dikenal dengan hasil pertanian 
                        berkualitas tinggi dan memiliki potensi wisata alam yang menarik dengan panorama perbukitan yang memukau.
                    </p>
                    
                    <div class="card-stats">
                        <div class="stat-item">
                            <div class="stat-value">4</div>
                            <div class="stat-label">Dusun</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">2,345</div>
                            <div class="stat-label">Hektar Luas</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">92%</div>
                            <div class="stat-label">Lahan Produktif</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">3</div>
                            <div class="stat-label">Spot Wisata</div>
                        </div>
                    </div>
                    
                    <a href="../Pruwatan/" class="map-button">
                        <i class="fas fa-map-marked-alt"></i>
                        Jelajahi Peta Pruwatan
                    </a>
                </div>
                <div class="card-image">
                    <div style="width:100%;height:100%;background:linear-gradient(45deg,#004d40,#00796b);display:flex;align-items:center;justify-content:center;color:white;">
                        <span>Peta Pruwatan Preview</span>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Features Section -->
    <section class="feature-section">
        <h2 class="section-title">Fitur Unggulan</h2>
        <p class="title-subtext">Teknologi canggih untuk pengalaman geospasial terbaik</p>
        
        <div class="feature-cards">
            <div class="feature-card" id="feature1">
                <i class="fas fa-layer-group"></i>
                <h4>Layers Berlapis 3D</h4>
                <p>Tampilkan lapisan peta seperti batas administrasi, jalan, dan penggunaan lahan dalam pengalaman 3D interaktif dengan kontrol penuh atas setiap layer.</p>
            </div>
            <div class="feature-card" id="feature2">
                <i class="fas fa-download"></i>
                <h4>Unduh Data Spasial</h4>
                <p>Akses dan unduh data geospasial dalam berbagai format (Shapefile, GeoJSON, KML) dengan metadata lengkap dan dokumentasi terstruktur.</p>
            </div>
            <div class="feature-card" id="feature3">
                <i class="fas fa-search-location"></i>
                <h4>Pencarian Lokasi Cerdas</h4>
                <p>Cari lokasi berdasarkan nama desa, kecamatan, atau koordinat dengan sistem pencarian real-time yang dilengkapi dengan auto-complete.</p>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <p>© 2025 Geoportal Bumiayu Pruwatan. Dibangun dengan QGIS, Three.js, Leaflet, dan GitHub Pages.</p>
            <p>Kontak: <a href="mailto:haidarhisyam1823@gmail.com">haidarhisyam1823@gmail.com</a></p>
            <p>Theme: Cosmic Exploration • v2.0</p>
        </div>
    </footer>

    <script>
        // ======================
        // 3D EARTH FOR BERANDA
        // ======================
        
        let scene, camera, renderer, earth;
        let controls;
        
        function initEarth3D() {
            // 1. Create scene
            scene = new THREE.Scene();
            
            // 2. Create camera
            camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 3;
            
            // 3. Create renderer
            renderer = new THREE.WebGLRenderer({ 
                alpha: true, 
                antialias: true,
                powerPreference: "high-performance"
            });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            
            const earthContainer = document.getElementById('earthContainer');
            earthContainer.appendChild(renderer.domElement);
            
            // 4. Add enhanced lighting
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.8);
            scene.add(ambientLight);
            
            const directionalLight1 = new THREE.DirectionalLight(0xffffff, 1);
            directionalLight1.position.set(5, 3, 5);
            scene.add(directionalLight1);
            
            const directionalLight2 = new THREE.DirectionalLight(0x4cc9f0, 0.5);
            directionalLight2.position.set(-5, -3, 5);
            scene.add(directionalLight2);
            
            // 5. Add subtle background stars
            createStarfield();
            
            // 6. Load Earth model
            const loader = new THREE.GLTFLoader();
            
            loader.load(
                '../assets/3d-models/earth.glb',
                function(gltf) {
                    earth = gltf.scene;
                    
                    // Apply user's adjustments
                    earth.scale.set(0.4, 0.4, 0.4);
                    
                    // Apply Indonesia rotation
                    const targetRotationY = Math.PI + (155 * Math.PI / 190);
                    earth.rotation.y = targetRotationY;
                    
                    // Center the earth
                    earth.position.set(0, 0, 0);
                    
                    // Enable shadows
                    earth.traverse(function(node) {
                        if (node.isMesh) {
                            node.castShadow = true;
                            node.receiveShadow = true;
                            node.material.emissive = new THREE.Color(0x0a0e17);
                            node.material.emissiveIntensity = 0.1;
                        }
                    });
                    
                    scene.add(earth);
                    
                    // Add orbit controls for interaction
                    controls = new THREE.OrbitControls(camera, renderer.domElement);
                    controls.enableDamping = true;
                    controls.dampingFactor = 0.05;
                    controls.enableZoom = false;
                    controls.enablePan = false;
                    controls.enableRotate = true;
                    controls.rotateSpeed = 0.5;
                    controls.maxPolarAngle = Math.PI;
                    controls.minPolarAngle = 0;
                    
                    // Start animation
                    animate();
                    
                    // Add subtle auto-rotation
                    setTimeout(() => {
                        if (earth) {
                            earth.rotation.y += 0.0005;
                        }
                    }, 1000);
                },
                function(xhr) {
                    console.log((xhr.loaded / xhr.total * 100) + '% loaded');
                },
                function(error) {
                    console.error('Error loading Earth model:', error);
                    createFallbackEarth();
                }
            );
            
            // 7. Handle window resize
            window.addEventListener('resize', onWindowResize);
        }
        
        function createFallbackEarth() {
            const geometry = new THREE.SphereGeometry(1, 32, 32);
            const material = new THREE.MeshPhongMaterial({
                color: 0x1e90ff,
                shininess: 30,
                specular: 0x111111
            });
            
            earth = new THREE.Mesh(geometry, material);
            earth.scale.set(0.4, 0.4, 0.4);
            const targetRotationY = Math.PI + (155 * Math.PI / 190);
            earth.rotation.y = targetRotationY;
            scene.add(earth);
            
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            controls.enableZoom = false;
            controls.enablePan = false;
            
            animate();
        }
        
        function createStarfield() {
            const starGeometry = new THREE.BufferGeometry();
            const starCount = 800;
            const positions = new Float32Array(starCount * 3);
            
            for (let i = 0; i < starCount * 3; i += 3) {
                positions[i] = (Math.random() - 0.5) * 2000;
                positions[i + 1] = (Math.random() - 0.5) * 2000;
                positions[i + 2] = (Math.random() - 0.5) * 2000;
            }
            
            starGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
            
            const starMaterial = new THREE.PointsMaterial({
                color: 0xffffff,
                size: 0.5,
                transparent: true,
                opacity: 0.7
            });
            
            const stars = new THREE.Points(starGeometry, starMaterial);
            scene.add(stars);
        }
        
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }
        
        function animate() {
            requestAnimationFrame(animate);
            
            // Very slow auto-rotation
            if (earth) {
                earth.rotation.y += 0.0001;
            }
            
            if (controls) controls.update();
            renderer.render(scene, camera);
        }
        
        // ======================
        // ENHANCED SCROLL ANIMATIONS
        // ======================
        
        // Header scroll effect
        window.addEventListener('scroll', () => {
            const header = document.getElementById('mainHeader');
            if (window.scrollY > 50) {
                header.classList.add('header-scrolled');
            } else {
                header.classList.remove('header-scrolled');
            }
            
            // Enhanced card animations
            updateEnhancedAnimations();
        });
        
        // GANTI fungsi updateEnhancedAnimations() dengan ini:
        function updateEnhancedAnimations() {
            const cards = document.querySelectorAll('.map-card');
            const features = document.querySelectorAll('.feature-card');
            const scrollPosition = window.scrollY + window.innerHeight;
            
            console.log(`Total cards found: ${cards.length}`); // Debug
            
            cards.forEach((card, index) => {
                const cardPosition = card.offsetTop;
                const cardHeight = card.offsetHeight;
                
                console.log(`Card ${index + 1}: pos=${cardPosition}, height=${cardHeight}, visible=${scrollPosition > cardPosition + 100}`); // Debug
                
                if (scrollPosition > cardPosition + 100) {
                    if (!card.classList.contains('active')) {
                        setTimeout(() => {
                            card.style.opacity = 1;
                            card.style.transform = 'translateY(0)';
                            card.classList.add('active');
                            console.log(`Card ${index + 1} activated`); // Debug
                        }, index * 400);
                    }
                } else if (scrollPosition < cardPosition - 300) {
                    // Reset jika scroll ke atas
                    if (card.classList.contains('active')) {
                        card.style.opacity = 0;
                        card.style.transform = 'translateY(80px)';
                        card.classList.remove('active');
                    }
                }
            });
            
            // Feature cards
            features.forEach((feature, index) => {
                const featurePosition = feature.offsetTop;
                if (scrollPosition > featurePosition + 100) {
                    if (!feature.classList.contains('active')) {
                        setTimeout(() => {
                            feature.classList.add('active');
                        }, index * 200);
                    }
                }
            });
        }
        
        // Tambahkan di DOMContentLoaded untuk debug:
        document.addEventListener('DOMContentLoaded', () => {
            console.log("DOM Loaded - Checking cards...");
            const cards = document.querySelectorAll('.map-card');
            cards.forEach((card, i) => {
                console.log(`Card ${i}:`, {
                    offsetTop: card.offsetTop,
                    offsetHeight: card.offsetHeight,
                    parent: card.parentElement.className
                });
            });
        });
        
        // Initialize everything
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize 3D Earth
            initEarth3D();
            
            // Smooth scroll for navigation links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    if (targetId !== '#') {
                        const targetElement = document.querySelector(targetId);
                        if (targetElement) {
                            window.scrollTo({
                                top: targetElement.offsetTop - 80,
                                behavior: 'smooth'
                            });
                        }
                    }
                });
            });
            
            // Initialize animations
            updateEnhancedAnimations();
            
            // Add hover effect to cards with enhanced feedback
            document.querySelectorAll('.card-image').forEach(image => {
                image.addEventListener('mouseenter', () => {
                    image.style.transform = 'scale(1.05) rotateY(5deg)';
                });
                
                image.addEventListener('mouseleave', () => {
                    image.style.transform = 'scale(1) rotateY(0)';
                });
            });
            
            // Add click effect to buttons
            document.querySelectorAll('.map-button').forEach(button => {
                button.addEventListener('click', function(e) {
                    // Create ripple effect
                    const ripple = document.createElement('span');
                    const rect = this.getBoundingClientRect();
                    const size = Math.max(rect.width, rect.height);
                    const x = e.clientX - rect.left - size / 2;
                    const y = e.clientY - rect.top - size / 2;
                    
                    ripple.style.cssText = `
                        position: absolute;
                        border-radius: 50%;
                        background: rgba(255, 255, 255, 0.3);
                        transform: scale(0);
                        animation: ripple 0.6s linear;
                        width: ${size}px;
                        height: ${size}px;
                        top: ${y}px;
                        left: ${x}px;
                    `;
                    
                    this.appendChild(ripple);
                    
                    setTimeout(() => {
                        ripple.remove();
                    }, 600);
                });
            });
            
            // Add CSS for ripple animation
            const style = document.createElement('style');
            style.textContent = `
                @keyframes ripple {
                    to {
                        transform: scale(4);
                        opacity: 0;
                    }
                }
            `;
            document.head.appendChild(style);
        });
        
        // Add keyboard controls
        document.addEventListener('keydown', (e) => {
            // Space to navigate to first card
            if (e.key === ' ' && !e.target.matches('input, textarea')) {
                e.preventDefault();
                document.querySelector('#bumiayu-card').scrollIntoView({ behavior: 'smooth' });
            }
            
            // Arrow down to scroll
            if (e.key === 'ArrowDown') {
                window.scrollBy({ top: window.innerHeight * 0.8, behavior: 'smooth' });
            }
            
            if (e.key === 'ArrowUp') {
                window.scrollBy({ top: -window.innerHeight * 0.8, behavior: 'smooth' });
            }
        });
        
        // Add scroll indicator
        function createScrollIndicator() {
            const indicator = document.createElement('div');
            indicator.id = 'scrollIndicator';
            indicator.innerHTML = '<i class="fas fa-chevron-down"></i>';
            indicator.style.cssText = `
                position: fixed;
                bottom: 30px;
                left: 50%;
                transform: translateX(-50%);
                color: var(--cosmic-cyan);
                font-size: 2rem;
                animation: bounce 2s infinite;
                z-index: 1000;
                cursor: pointer;
                opacity: 0.7;
                transition: opacity 0.3s;
            `;
            
            indicator.addEventListener('click', () => {
                document.querySelector('#maps').scrollIntoView({ behavior: 'smooth' });
            });
            
            indicator.addEventListener('mouseenter', () => {
                indicator.style.opacity = '1';
            });
            
            indicator.addEventListener('mouseleave', () => {
                indicator.style.opacity = '0.7';
            });
            
            document.body.appendChild(indicator);
            
            // Add bounce animation
            const bounceStyle = document.createElement('style');
            bounceStyle.textContent = `
                @keyframes bounce {
                    0%, 20%, 50%, 80%, 100% { transform: translateX(-50%) translateY(0); }
                    40% { transform: translateX(-50%) translateY(-10px); }
                    60% { transform: translateX(-50%) translateY(-5px); }
                }
            `;
            document.head.appendChild(bounceStyle);
            
            // Hide indicator when scrolling down
            window.addEventListener('scroll', () => {
                if (window.scrollY > 100) {
                    indicator.style.opacity = '0';
                } else {
                    indicator.style.opacity = '0.7';
                }
            });
        }
        
        // Initialize scroll indicator after page loads
        window.addEventListener('load', () => {
            setTimeout(createScrollIndicator, 1000);
        });
    </script>
</body>
</html>
