<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Selamat Datang — Geoportal Bumiayu Pruwatan</title>

  <!-- canonical -->
  <link rel="canonical" href="https://dragon-learn.github.io/geoportal-bumiayu_pruwatan/Beranda/">

  <!-- fallback meta refresh (longer than JS so animation plays) -->
  <meta http-equiv="refresh" content="8; url=./Beranda/">

  <!-- fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Poppins:wght@600;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --primary: #2F7A49;
      --muted-on-dark: rgba(255,255,255,0.95);
      --card-bg: rgba(255,255,255,0.04);
      --glass-blur: 6px;
      --max-card-w: 940px;
    }

    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial;color:var(--muted-on-dark);-webkit-font-smoothing:antialiased}
    a{color:inherit}

    /* HERO - background + gentle zoom (breath) */
    .hero{
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      background: radial-gradient(circle at 10% 20%, rgba(255,255,255,0.02), transparent 8%),
                  linear-gradient(180deg, rgba(6,12,20,0.46), rgba(6,12,20,0.68));
      position:relative;
      overflow:hidden;
    }
    /* background image layer */
    .bg {
      position:absolute; inset:0; z-index:0; background:
        url('beranda-snapshot.png') center/cover no-repeat;
      transform-origin:center;
      filter: blur(14px) saturate(.9) contrast(.98);
      opacity:0.96;
      will-change: transform, opacity;
      animation: bgBreath 10s ease-in-out infinite;
    }
    @keyframes bgBreath {
      0%{ transform: scale(1); opacity:0.98 }
      50%{ transform: scale(1.03); opacity:0.995 }
      100%{ transform: scale(1); opacity:0.98 }
    }

    /* floating decorative shapes */
    .float-layer{ position:absolute; inset:0; pointer-events:none; z-index:1; }
    .float-dot{
      position:absolute; width:140px; height:140px; border-radius:50%;
      background: radial-gradient(circle at 35% 35%, rgba(255,255,255,0.06), transparent 40%);
      filter: blur(28px); opacity:0.9;
      animation: floatSlow linear infinite;
    }
    .float-dot.x1{ left:6%; top:10%; animation-duration:18s; }
    .float-dot.x2{ right:4%; top:18%; animation-duration:20s; transform:scale(.95); }
    .float-dot.x3{ left:12%; bottom:8%; animation-duration:24s; transform:scale(.8); filter: blur(34px); }

    @keyframes floatSlow{
      0%{ transform: translateY(0) }
      50%{ transform: translateY(-24px) translateX(6px) }
      100%{ transform: translateY(0) }
    }

    /* CARD centered and fixed width to solve off-centering */
    .card-wrap{
      position:relative; z-index:2; width:100%; display:flex; justify-content:center; padding:28px;
    }
    .card{
      width: min(var(--max-card-w), 96%);
      display:flex; gap:22px; align-items:center; padding:28px 28px;
      border-radius:16px; background:var(--card-bg);
      backdrop-filter: blur(var(--glass-blur));
      box-shadow: 0 14px 40px rgba(4,10,20,0.6);
      transform-style:preserve-3d;
      transition: transform .18s ease, box-shadow .18s ease;
    }
    /* center alignment of inner elements - fixes off-centering */
    .left { flex:0 0 120px; display:flex; align-items:center; justify-content:center; position:relative; }
    .content { flex:1 1 auto; min-width:0 }

    /* PIN SVG + shadow */
    .pin {
      width:92px; height:92px; transform-origin:center center;
      animation: pinDrop 850ms cubic-bezier(.22,.9,.32,1) 200ms both;
      will-change: transform;
    }
    .pin-shadow{
      width:72px; height:12px; border-radius:50%; background:rgba(0,0,0,0.35);
      position:absolute; bottom:18px; left:calc(50% - 36px); filter: blur(6px);
      transform-origin:center; opacity:0; animation: shadowPulse 850ms cubic-bezier(.22,.9,.32,1) 200ms both;
    }
    @keyframes pinDrop {
      0%{ transform: translateY(-220px) scale(.98) rotate(-6deg); opacity:0 }
      65%{ transform: translateY(16px) scale(1.06) rotate(4deg); opacity:1 }
      100%{ transform: translateY(0) scale(1) rotate(0) }
    }
    @keyframes shadowPulse {
      0%{ transform: scale(.2); opacity:0 }
      60%{ transform: scale(0.96); opacity:.6 }
      100%{ transform: scale(1); opacity:.55 }
    }

    /* idle wiggle after drop (small and elegant) */
    .pin.idle { animation: none; }
    .pin.idle-wiggle { animation: wiggle 2200ms ease-in-out infinite; transform-origin:center bottom; }
    @keyframes wiggle {
      0%{ transform: translateY(0) rotate(0deg) }
      25%{ transform: translateY(-3px) rotate(-2deg) }
      50%{ transform: translateY(0) rotate(0deg) }
      75%{ transform: translateY(-3px) rotate(2deg) }
      100%{ transform: translateY(0) rotate(0deg) }
    }

    /* HEADLINE - letter-by-letter */
    .headline{ font-family:Poppins,Inter, system-ui; font-weight:700; font-size:clamp(1.5rem,4.5vw,2.8rem); margin:0; line-height:1.02; display:block; overflow:visible; }
    .headline .char{ display:inline-block; transform-origin:center; opacity:0; transform: translateY(8px) rotateX(14deg) scale(.98); animation: letterIn .55s cubic-bezier(.2,.9,.3,1) forwards; }
    @keyframes letterIn {
      to{ opacity:1; transform: translateY(0) rotateX(0deg) scale(1) }
    }

    /* Subtitle words slide and fade */
    .subtitle{ margin:10px 0 0; color:rgba(255,255,255,0.85); font-size:1rem; opacity:0; transform:translateY(6px); animation: subIn 750ms 420ms cubic-bezier(.2,.9,.3,1) forwards; }
    @keyframes subIn { to{ opacity:1; transform:translateY(0) } }

    /* CTA with sheen */
    .cta{
      display:inline-flex; gap:10px; align-items:center; margin-top:14px; text-decoration:none;
      padding:10px 18px; border-radius:999px; font-weight:700; color:white;
      background: linear-gradient(90deg,var(--primary), #3FA374); position:relative; overflow:hidden;
      box-shadow: 0 12px 28px rgba(47,122,73,0.16);
    }
    .cta::after{
      content:""; position:absolute; inset:0; left:-40%; width:40%; transform:skewX(-18deg) translateX(0);
      background: linear-gradient(90deg, rgba(255,255,255,0.15), rgba(255,255,255,0.28), rgba(255,255,255,0.05));
      transform-origin:left; transition:transform .85s cubic-bezier(.2,.9,.3,1);
    }
    .cta:hover::after{ transform: translateX(200%); } /* sheen sweep on hover */

    /* small meta text */
    .meta{ margin-top:8px; font-size:0.87rem; color:rgba(255,255,255,0.72) }

    /* small screens */
    @media (max-width:720px){
      .card{ flex-direction:row; gap:12px; padding:18px; align-items:center; }
      .left{ flex:0 0 84px }
      .pin{ width:70px; height:70px }
      .headline{ font-size:1.4rem }
    }

    /* reduced motion: minimal animations */
    @media (prefers-reduced-motion: reduce) {
      .bg, .float-dot, .pin, .pin-shadow, .headline .char, .subtitle, .cta::after { animation: none !important; transition: none !important; opacity:1 !important; transform:none !important; }
    }
  </style>
</head>
<body>
  <main class="hero" id="hero" role="main" aria-label="Landing Geoportal">
    <div class="bg" aria-hidden="true"></div>

    <div class="float-layer" aria-hidden="true">
      <div class="float-dot x1"></div>
      <div class="float-dot x2"></div>
      <div class="float-dot x3"></div>
    </div>

    <div class="card-wrap">
      <section class="card" id="card" role="region" aria-label="Selamat datang">
        <div class="left">
          <!-- PIN SVG -->
          <svg class="pin" viewBox="0 0 64 64" aria-hidden="true" role="img" focusable="false">
            <defs>
              <linearGradient id="g1" x1="0" x2="1" y1="0" y2="1">
                <stop offset="0" stop-color="#FF8A65"/>
                <stop offset="1" stop-color="#F2994A"/>
              </linearGradient>
            </defs>
            <path d="M32 4c-7.2 0-13 5.8-13 13 0 10.2 13 29 13 29s13-18.8 13-29c0-7.2-5.8-13-13-13z" fill="url(#g1)"/>
            <circle cx="32" cy="17" r="6.6" fill="#fff" />
          </svg>
          <div class="pin-shadow" aria-hidden="true"></div>
        </div>

        <div class="content">
          <!-- headline will be split into characters by JS for stagger -->
          <h1 class="headline" id="headline">Selamat Datang di Geoportal Bumiayu Pruwatan</h1>
          <p class="subtitle" id="subtitle">Peta interaktif, pencarian lokasi, unduh data—semua pada satu tempat.</p>

          <a id="enterBtn" class="cta" href="./Beranda/" role="link" aria-label="Masuk ke Beranda">Masuk ke Beranda →</a>
          <div class="meta" id="meta">Mengalihkan dalam <strong id="count">7</strong> detik. Klik tombol untuk langsung masuk.</div>
        </div>
      </section>
    </div>
  </main>

  <script>
    (function(){
      // Redirect after 7s (meta is 8s as fallback)
      const REDIRECT_MS = 7000;
      setTimeout(()=> { window.location.href = './Beranda/'; }, REDIRECT_MS);

      // nice stagger for headline letters (tween-y feel)
      function splitAndAnimateHeadline() {
        const el = document.getElementById('headline');
        if(!el) return;
        const text = el.textContent.trim();
        el.textContent = '';
        // create spans for each character (preserve spaces)
        for(let i=0;i<text.length;i++){
          const ch = text[i];
          const span = document.createElement('span');
          span.className = 'char';
          span.textContent = ch;
          // staggered delay (CSS-based)
          const delay = 0.05 * i; // seconds
          span.style.animationDelay = `${delay}s`;
          el.appendChild(span);
        }
      }

      // subtitle slight word-by-word entrance
      function animateSubtitle() {
        const sub = document.getElementById('subtitle');
        if(!sub) return;
        // no heavy DOM ops: we just ensure it already has an animation delay in CSS
        sub.style.opacity = '0';
        // will fade in from CSS keyframe
      }

      // make pin go idle-wiggle after drop finishes
      function pinIdle() {
        const pin = document.querySelector('.pin');
        if(!pin) return;
        // when drop animation ends, switch to idle wiggle
        pin.addEventListener('animationend', function handler(e) {
          if (e.animationName && e.animationName.includes('pinDrop')) {
            pin.classList.add('idle-wiggle');
            pin.classList.remove('idle');
            pin.removeEventListener('animationend', handler);
          }
        });
      }

      // micro parallax for card on pointer move (very subtle)
      function attachParallax() {
        const hero = document.getElementById('hero');
        const card = document.getElementById('card');
        if(!hero || !card) return;
        const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        const fine = window.matchMedia('(pointer:fine)').matches;
        if(prefersReduced || !fine) return;

        hero.addEventListener('pointermove', (ev) => {
          const r = hero.getBoundingClientRect();
          const px = (ev.clientX - r.left) / r.width - 0.5;
          const py = (ev.clientY - r.top) / r.height - 0.5;
          const tx = px * 8; // small translate
          const ty = py * 8;
          card.style.transform = `translate3d(${tx}px, ${ty}px, 0)`;
        });
        hero.addEventListener('pointerleave', ()=> card.style.transform = '');
      }

      // countdown visible
      function startCountdown(ms) {
        const el = document.getElementById('count');
        if(!el) return;
        let t = Math.ceil(ms/1000);
        el.textContent = t;
        const iv = setInterval(()=> {
          t--;
          el.textContent = Math.max(0,t);
          if(t<=0) clearInterval(iv);
        }, 1000);
      }

      // init
      splitAndAnimateHeadline();
      animateSubtitle();
      pinIdle();
      attachParallax();
      startCountdown(REDIRECT_MS);

      // accessibility: focus CTA so keyboard users can find it quickly
      const enterBtn = document.getElementById('enterBtn');
      if(enterBtn) {
        enterBtn.focus({preventScroll:true});
      }
    })();
  </script>
</body>
</html>
